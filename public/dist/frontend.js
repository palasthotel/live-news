!function(){"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var n=["second","minute","hour","day","week","month","year"],r=["秒","分钟","小时","天","周","个月","年"],i={},o=function(t,e){i[t]=e},a="timeago-id",u=[60,60,24,7,365/7/12,12];function c(t){return t instanceof Date?t:!isNaN(t)||/^\d+$/.test(t)?new Date(parseInt(t)):(t=(t||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(t))}var s={};function l(t,e,n,r){!function(t){clearTimeout(t),delete s[t]}(function(t){return parseInt(t.getAttribute(a))}(t));var i=r.relativeDate,o=r.minInterval,f=function(t,e){return(+(e?c(e):new Date)-+c(t))/1e3}(e,i);t.innerText=function(t,e){for(var n=t<0?1:0,r=t=Math.abs(t),i=0;t>=u[i]&&i<u.length;i++)t/=u[i];return(t=Math.floor(t))>(0==(i*=2)?9:1)&&(i+=1),e(t,i,r)[n].replace("%s",t.toString())}(f,n);var d=setTimeout((function(){l(t,e,n,r)}),Math.min(1e3*Math.max(function(t){for(var e=1,n=0,r=Math.abs(t);t>=u[n]&&n<u.length;n++)t/=u[n],e*=u[n];return r=(r%=e)?e-r:e,Math.ceil(r)}(f),o||1),2147483647));s[d]=0,function(t,e){t.setAttribute(a,e)}(t,d)}function f(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}o("en_US",(function(t,e){if(0===e)return["just now","right now"];var r=n[Math.floor(e/2)];return t>1&&(r+="s"),[t+" "+r+" ago","in "+t+" "+r]})),o("zh_CN",(function(t,e){if(0===e)return["刚刚","片刻后"];var n=r[~~(e/2)];return[t+" "+n+"前",t+" "+n+"后"]}));var v=encodeURIComponent,p=function(e){return function(e){return Object.keys(e).map((function(n){var r=e[n];return t(r)===t([])?r.map((function(t){return"".concat(n,"[]=").concat(t)})).join("&"):n+"="+e[n]})).join("&")}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.unix_timestamp_after,r=void 0===n?null:n,i=e.unix_timestamp_before,o=void 0===i?null:i,a=e.tags,u=void 0===a?null:a,c=e.number_of_particles,s=void 0===c?null:c,l=e.order_direction,f=void 0===l?null:l,d=e.output,p=void 0===d?"json":d,h={};if(null!==r&&(h.unix_timestamp_after=parseInt(r)),null!==o&&(h.unix_timestamp_before=parseInt(o)),null!==s&&(h.number_of_particles=parseInt(s)),null!==f&&(h.order_direction=f),null!==u){if(t(u)!==t([]))throw new Error("Tags need to be an array of strings");h.tags=u.map(v)}return"html"!==p&&(p="json"),h.output=p,h}(e))},h=function(t){var e=t.routes,n=t.last_request_timestamp,r=function(t){return t.json().then((function(t){return t.particles}))},i=function(t){return t.json().then((function(t){return n=t.request_timestamp,t.particles}))};return{fetchParticles:function(t){return fetch(e.getParticles+"?"+p(t),{method:"GET"}).then(r).catch(console.error)},fetchParticlesUpdate:function(t){var r=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){f(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({unix_timestamp_after:n,order_direction:"DESC"},t);return fetch(e.getParticles+"?"+p(r)).then(i).catch(console.error)},resetLastRequestTimestamp:function(){n=0}}},m={},g=function(e){return function(e,n){return"undefined"===t(m[e])&&(m[e]=[]),m[e].push(n),function(){m[e]=m[e].filter((function(t){return t!==n}))}}("particleAdd",e)},y=function(e){return r=e,void(t(m[n="particleAdd"])===t([])&&m[n].forEach((function(t){t(r)})));var n,r};function b(t,e){var n;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return w(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){u=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}o("de_DE",(function(t,e,n){return[["jetzt","jetzt"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in einer Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahr"]][e]})),function(n,r){var o=r.selectors,a=r.isFetchUpdatesActive,u=n("body"),c=n("#"+o.rootId),s=n("#"+o.listId),f=n("#"+o.loadMoreId),d={filterVisibleParticles:function(t){return t},filterShowMoreIncrement:function(t){return t},filterHideShowMoreButton:function(t){return t}};if(1===c.length&&1===s.length){var v=h(r),p=[],m=s.children().length,w=function(t,e){return e.created-t.created},_=function(t){var e=t.filter((function(t){return!t.is_deleted})),n=e.map((function(t){return t.id})),r=t.filter((function(t){return t.is_deleted})).map((function(t){return t.id}));p=p.filter(function(t){return function(e){return!t.includes(e.id)}}(r)).filter(function(t){return function(e){return!t.includes(e.id)}}(n));var i,o=b(e);try{for(o.s();!(i=o.n()).done;){var a=i.value;p.push(a)}}catch(t){o.e(t)}finally{o.f()}p.sort(w)},S=function(){return function(t){if(Array.isArray(t))return e(t)}(t=p)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var t},j=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return m+=t},M=function(){arguments.length>0&&void 0!==arguments[0]||S();var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return d.filterVisibleParticles(S().slice(0,t))};f.length&&f.on("click",(function(t){t.preventDefault(),j(d.filterShowMoreIncrement(5)),P()}));var O=null;u.addClass("live-news-status__is-fetching"),v.fetchParticles({output:"html"}).then((function(t){u.removeClass("live-news-status__is-fetching"),_(t),A()})),I(n(".timeago")),LiveNews.api=v,LiveNews.timeagoize=I,LiveNews.listeners={onAddParticle:g},LiveNews.numberOfVisibleParticles=function(){return m},LiveNews.showMore=j,LiveNews.show=function(t){return m=t},LiveNews.getParticles=S,LiveNews.hooks=d,LiveNews.updateView=P,LiveNews.autoFetchUpdates=function(t){a=t,A()}}else console.error("Missing root and list ids",o);function A(){clearTimeout(O),a&&(u.addClass("live-news-status__is-fetching-update"),v.fetchParticlesUpdate({output:"html"}).then((function(t){u.removeClass("live-news-status__is-fetching-update"),u.addClass("live-news-status__fetched-update"),setTimeout((function(){u.removeClass("live-news-status__fetched-update")}),500),j(t.length),_(t),P()?O=setTimeout(A,5e3):console.error("something went wrong...")})))}function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M(),r=(new Date).getTime();if(t(e)!==t([])||e.length<1)return!1;var i,o=-1,a=b(e);try{for(a.s();!(i=a.n()).done;){var c=i.value;o++;var l=c.id,f=c.html,v=s.find("[data-particle-id=".concat(l,"]"));if(c.is_deleted)v.remove(),o--;else{var h=n(f);h.attr("data-update-timestamp",r),h.attr("data-particle-modified",c.modified),v.length?v.attr("data-particle-modified")!==h.attr("data-particle-modified")?v.replaceWith(h):(v.attr("data-update-timestamp",r),h=v):(s.append(h),y(h));var m=h.index();m!==o&&(0===o?s.prepend(h):h.insertAfter(s.children().get(o-1))),I(h.find(".timeago"))}}}catch(t){a.e(t)}finally{a.f()}var g=0;return s.children().each((function(t,e){var i=n(e);i.attr("data-update-timestamp")!==r+""?i.hide():(i.show(),g++)})),d.filterHideShowMoreButton(g>=p.length)?u.addClass("live-news-status__all-visible"):u.removeClass("live-news-status__all-visible"),!0}function I(t){var e,n,r;e=t.get(),n="de_DE",(e.length?e:[e]).forEach((function(t){l(t,function(t){return t.getAttribute("datetime")}(t),function(t){return i[t]||i.en_US}(n),r||{})}))}}(jQuery,LiveNews)}();