!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var n=["second","minute","hour","day","week","month","year"],r=["秒","分钟","小时","天","周","个月","年"],i={},o=function(e,t){i[e]=t},a="timeago-id",u=[60,60,24,7,365/7/12,12];function c(e){return e instanceof Date?e:!isNaN(e)||/^\d+$/.test(e)?new Date(parseInt(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([+-]\d\d):?(\d\d)/," $1$2"),new Date(e))}var s={};function l(e,t,n,r){!function(e){clearTimeout(e),delete s[e]}(function(e){return parseInt(e.getAttribute(a))}(e));var i=r.relativeDate,o=r.minInterval,f=function(e,t){return(+(t?c(t):new Date)-+c(e))/1e3}(t,i);e.innerText=function(e,t){for(var n=e<0?1:0,r=e=Math.abs(e),i=0;e>=u[i]&&i<u.length;i++)e/=u[i];return(e=Math.floor(e))>(0==(i*=2)?9:1)&&(i+=1),t(e,i,r)[n].replace("%s",e.toString())}(f,n);var d=setTimeout((function(){l(e,t,n,r)}),Math.min(1e3*Math.max(function(e){for(var t=1,n=0,r=Math.abs(e);e>=u[n]&&n<u.length;n++)e/=u[n],t*=u[n];return r=(r%=t)?t-r:t,Math.ceil(r)}(f),o||1),2147483647));s[d]=0,function(e,t){e.setAttribute(a,t)}(e,d)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}o("en_US",(function(e,t){if(0===t)return["just now","right now"];var r=n[Math.floor(t/2)];return e>1&&(r+="s"),[e+" "+r+" ago","in "+e+" "+r]})),o("zh_CN",(function(e,t){if(0===t)return["刚刚","片刻后"];var n=r[~~(t/2)];return[e+" "+n+"前",e+" "+n+"后"]}));var m=encodeURIComponent,v=function(t){return function(t){return Object.keys(t).map((function(n){var r=t[n];return e(r)===e([])?r.map((function(e){return"".concat(n,"[]=").concat(e)})).join("&"):n+"="+t[n]})).join("&")}(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.unix_timestamp_after,r=void 0===n?null:n,i=t.unix_timestamp_before,o=void 0===i?null:i,a=t.tags,u=void 0===a?null:a,c=t.number_of_particles,s=void 0===c?null:c,l=t.order_direction,f=void 0===l?null:l,d=t.output,v=void 0===d?"json":d,p={};if(null!==r&&(p.unix_timestamp_after=parseInt(r)),null!==o&&(p.unix_timestamp_before=parseInt(o)),null!==s&&(p.number_of_particles=parseInt(s)),null!==f&&(p.order_direction=f),null!==u){if(e(u)!==e([]))throw new Error("Tags need to be an array of strings");p.tags=u.map(m)}return"html"!==v&&(v="json"),p.output=v,p}(t))},p=function(e){var t=e.routes,n=e.last_request_timestamp,r=function(e){return e.json().then((function(e){return e.particles}))},i=function(e){return e.json().then((function(e){return n=e.request_timestamp,e.particles}))};return{fetchParticles:function(e){return fetch(t.getParticles+"?"+v(e),{method:"GET"}).then(r).catch(console.error)},fetchParticlesUpdate:function(e){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({unix_timestamp_after:n,order_direction:"DESC"},e);return fetch(t.getParticles+"?"+v(r)).then(i).catch(console.error)},resetLastRequestTimestamp:function(){n=0}}},h={},y=function(t){return function(t,n){return"undefined"===e(h[t])&&(h[t]=[]),h[t].push(n),function(){h[t]=h[t].filter((function(e){return e!==n}))}}("particleAdd",t)},b=function(t){return r=t,void(e(h[n="particleAdd"])===e([])&&h[n].forEach((function(e){e(r)})));var n,r};function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){u=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(u)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}o("de_DE",(function(e,t,n){return[["jetzt","jetzt"],["vor %s Sekunden","in %s Sekunden"],["vor 1 Minute","in 1 Minute"],["vor %s Minuten","in %s Minuten"],["vor 1 Stunde","in einer Stunde"],["vor %s Stunden","in %s Stunden"],["vor 1 Tag","in 1 Tag"],["vor %s Tagen","in %s Tagen"],["vor 1 Woche","in 1 Woche"],["vor %s Wochen","in %s Wochen"],["vor 1 Monat","in 1 Monat"],["vor %s Monaten","in %s Monaten"],["vor 1 Jahr","in 1 Jahr"],["vor %s Jahren","in %s Jahr"]][t]})),function(n){var r=n.selectors,o=n.isFetchUpdatesActive,a=document.getElementById(r.rootId),u=document.getElementById(r.listId),c=document.getElementById(r.loadMoreId),s={filterVisibleParticles:function(e){return e},filterShowMoreIncrement:function(e){return e},filterHideShowMoreButton:function(e){return e}};if(a&&u){var f=p(n),d=[],m=u.childNodes.length,v=function(e,t){return t.created-e.created},h=function(e){var t=e.filter((function(e){return!e.is_deleted})),n=t.map((function(e){return e.id})),r=e.filter((function(e){return e.is_deleted})).map((function(e){return e.id}));d=d.filter(function(e){return function(t){return!e.includes(t.id)}}(r)).filter(function(e){return function(t){return!e.includes(t.id)}}(n));var i,o=g(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;d.push(a)}}catch(e){o.e(e)}finally{o.f()}d.sort(v)},w=function(){return function(e){if(Array.isArray(e))return t(e)}(e=d)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();var e},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return m+=e},S=function(){arguments.length>0&&void 0!==arguments[0]||w();var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m;return s.filterVisibleParticles(w().slice(0,e))};c&&c.addEventListener("click",(function(e){e.preventDefault(),_(s.filterShowMoreIncrement(5)),M()}));var j=null;document.body.classList.add("live-news-status__is-fetching"),f.fetchParticles({output:"html"}).then((function(e){document.body.classList.remove("live-news-status__is-fetching"),h(e),A()})),document.querySelectorAll(".timeago").forEach(O),LiveNews.api=f,LiveNews.timeagoize=O,LiveNews.listeners={onAddParticle:y},LiveNews.numberOfVisibleParticles=function(){return m},LiveNews.showMore=_,LiveNews.show=function(e){return m=e},LiveNews.getParticles=w,LiveNews.hooks=s,LiveNews.updateView=M,LiveNews.autoFetchUpdates=function(e){o=e,A()}}else console.error("Missing root and list ids",r);function A(){clearTimeout(j),o&&(document.body.classList.add("live-news-status__is-fetching-update"),f.fetchParticlesUpdate({output:"html"}).then((function(e){document.body.classList.remove("live-news-status__is-fetching-update"),document.body.classList.add("live-news-status__fetched-update"),setTimeout((function(){document.body.classList.remove("live-news-status__fetched-update")}),500),_(e.length),h(e),M()?j=setTimeout(A,5e3):console.error("something went wrong...")})))}function M(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S(),n=(new Date).getTime();if(e(t)!==e([])||t.length<1)return!1;var r,i=-1,o=g(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;i++;var c=a.id,l=a.html,f=u.querySelector('[data-particle-id="'.concat(c,'"]'));if(a.is_deleted)f.remove(),i--;else{var m=document.createElement("div");m.innerHTML=l;var v=m.firstChild;v.setAttribute("data-update-timestamp",n),v.setAttribute("data-particle-modified",a.modified),f?f.getAttribute("data-particle-modified")!==v.getAttribute("data-particle-modified")?f.replaceWith(v):(f.setAttribute("data-update-timestamp",n),v=f):(u.append(v),b(v));var p=Array.from(v.parentNode.childNodes).indexOf(v);p!==i&&(0===i?u.prepend(v):u.insertBefore(v,u.children[i])),O(v.querySelector(".timeago"))}}}catch(e){o.e(e)}finally{o.f()}var h,y=0,w=g(u.children);try{for(w.s();!(h=w.n()).done;){var _=h.value;_.getAttribute("data-update-timestamp")!==n+""?_.style.display="none":(_.style.display="inherit",y++)}}catch(e){w.e(e)}finally{w.f()}return s.filterHideShowMoreButton(y>=d.length)?document.body.classList.add("live-news-status__all-visible"):document.body.classList.remove("live-news-status__all-visible"),!0}function O(e){var t,n,r;n="de_DE",((t=e).length?t:[t]).forEach((function(e){l(e,function(e){return e.getAttribute("datetime")}(e),function(e){return i[e]||i.en_US}(n),r||{})}))}}(LiveNews)}();