!function(){var e={753:function(){jQuery.trumbowyg={langs:{en:{viewHTML:"View HTML",undo:"Undo",redo:"Redo",formatting:"Formatting",p:"Paragraph",blockquote:"Quote",code:"Code",header:"Header",bold:"Bold",italic:"Italic",strikethrough:"Strikethrough",underline:"Underline",strong:"Strong",em:"Emphasis",del:"Deleted",superscript:"Superscript",subscript:"Subscript",unorderedList:"Unordered list",orderedList:"Ordered list",insertImage:"Insert Image",link:"Link",createLink:"Insert link",unlink:"Remove link",justifyLeft:"Align Left",justifyCenter:"Align Center",justifyRight:"Align Right",justifyFull:"Align Justify",horizontalRule:"Insert horizontal rule",removeformat:"Remove format",fullscreen:"Fullscreen",close:"Close",submit:"Confirm",reset:"Cancel",required:"Required",description:"Description",title:"Title",text:"Text",target:"Target",width:"Width"}},plugins:{},svgPath:null,svgAbsoluteUseHref:!1,hideButtonTexts:null},Object.defineProperty(jQuery.trumbowyg,"defaultOptions",{value:{lang:"en",fixedBtnPane:!1,fixedFullWidth:!1,autogrow:!1,autogrowOnEnter:!1,imageWidthModalEdit:!1,hideButtonTexts:null,prefix:"trumbowyg-",tagClasses:{},semantic:!0,semanticKeepAttributes:!1,resetCss:!1,removeformatPasted:!1,tabToIndent:!1,tagsToRemove:[],tagsToKeep:["hr","img","embed","iframe","input"],btns:[["viewHTML"],["undo","redo"],["formatting"],["strong","em","del"],["superscript","subscript"],["link"],["insertImage"],["justifyLeft","justifyCenter","justifyRight","justifyFull"],["unorderedList","orderedList"],["horizontalRule"],["removeformat"],["fullscreen"]],btnsDef:{},changeActiveDropdownIcon:!1,inlineElementsSelector:"a,abbr,acronym,b,caption,cite,code,col,dfn,dir,dt,dd,em,font,hr,i,kbd,li,q,span,strikeout,strong,sub,sup,u",pasteHandlers:[],plugins:{},urlProtocol:!1,minimalLinks:!1,defaultLinkTarget:void 0,svgPath:null},writable:!1,enumerable:!0,configurable:!1}),function(e,t,n,o){"use strict";var r="tbwconfirm",i="tbwcancel";o.fn.trumbowyg=function(e,t){var n="trumbowyg";if(e===Object(e)||!e)return this.each((function(){o(this).data(n)||o(this).data(n,new a(this,e))}));if(1===this.length)try{var r=o(this).data(n);switch(e){case"execCmd":return r.execCmd(t.cmd,t.param,t.forceCss,t.skipTrumbowyg);case"openModal":return r.openModal(t.title,t.content);case"closeModal":return r.closeModal();case"openModalInsert":return r.openModalInsert(t.title,t.fields,t.callback);case"saveRange":return r.saveRange();case"getRange":return r.range;case"getRangeText":return r.getRangeText();case"restoreRange":return r.restoreRange();case"enable":return r.setDisabled(!1);case"disable":return r.setDisabled(!0);case"toggle":return r.toggle();case"destroy":return r.destroy();case"empty":return r.empty();case"html":return r.html(t)}}catch(e){}return!1};var a=function(r,i){var a=this,s=o.trumbowyg;a.doc=r.ownerDocument||n,a.$ta=o(r),a.$c=o(r),null!=(i=i||{}).lang||null!=s.langs[i.lang]?a.lang=o.extend(!0,{},s.langs.en,s.langs[i.lang]):a.lang=s.langs.en,a.hideButtonTexts=null!=s.hideButtonTexts?s.hideButtonTexts:i.hideButtonTexts;var l=null!=s.svgPath?s.svgPath:i.svgPath;if(a.hasSvg=!1!==l,!1!==l&&(s.svgAbsoluteUseHref||0===o("#trumbowyg-icons",a.doc).length))if(null==l&&o("script[src]").each((function(e,t){var n=t.src,o=n.match("trumbowyg(.min)?.js");null!=o&&(l=n.substring(0,n.indexOf(o[0]))+"ui/icons.svg")})),null==l)console.warn("You must define svgPath: https://goo.gl/CfTY9U");else if(!s.svgAbsoluteUseHref){var x=a.doc.createElement("div");x.id="trumbowyg-icons",a.doc.body.insertBefore(x,a.doc.body.childNodes[0]),o.ajax({async:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",dataType:"xml",crossDomain:!0,url:l,data:null,beforeSend:null,complete:null,success:function(e){x.innerHTML=(new XMLSerializer).serializeToString(e.documentElement)}})}var c=a.doc.querySelector("base")?t.location.href.split(/[?#]/)[0]:"";a.svgPath=s.svgAbsoluteUseHref?l:c;var d=a.lang.header,u=function(){return(t.chrome||t.Intl&&Intl.v8BreakIterator)&&"CSS"in t};a.btnsDef={viewHTML:{fn:"toggle",class:"trumbowyg-not-disable"},undo:{isSupported:u,key:"Z"},redo:{isSupported:u,key:"Y"},p:{fn:"formatBlock"},blockquote:{fn:"formatBlock"},h1:{fn:"formatBlock",title:d+" 1"},h2:{fn:"formatBlock",title:d+" 2"},h3:{fn:"formatBlock",title:d+" 3"},h4:{fn:"formatBlock",title:d+" 4"},h5:{fn:"formatBlock",title:d+" 5"},h6:{fn:"formatBlock",title:d+" 6"},subscript:{tag:"sub"},superscript:{tag:"sup"},bold:{key:"B",tag:"b"},italic:{key:"I",tag:"i"},underline:{tag:"u"},strikethrough:{tag:"strike"},strong:{fn:"bold",key:"B"},em:{fn:"italic",key:"I"},del:{fn:"strikethrough"},createLink:{key:"K",tag:"a"},unlink:{},insertImage:{},justifyLeft:{tag:"left",forceCss:!0},justifyCenter:{tag:"center",forceCss:!0},justifyRight:{tag:"right",forceCss:!0},justifyFull:{tag:"justify",forceCss:!0},unorderedList:{fn:"insertUnorderedList",tag:"ul"},orderedList:{fn:"insertOrderedList",tag:"ol"},horizontalRule:{fn:"insertHorizontalRule"},removeformat:{},fullscreen:{class:"trumbowyg-not-disable"},close:{fn:"destroy",class:"trumbowyg-not-disable"},formatting:{dropdown:["p","blockquote","h1","h2","h3","h4"],ico:"p"},link:{dropdown:["createLink","unlink"]}},a.o=o.extend(!0,{},s.defaultOptions,i),a.o.hasOwnProperty("imgDblClickHandler")||(a.o.imgDblClickHandler=a.getDefaultImgDblClickHandler()),a.urlPrefix=a.setupUrlPrefix(),a.disabled=a.o.disabled||"TEXTAREA"===r.nodeName&&r.disabled,i.btns?a.o.btns=i.btns:a.o.semantic||(a.o.btns[3]=["bold","italic","underline","strikethrough"]),o.each(a.o.btnsDef,(function(e,t){a.addBtnDef(e,t)})),a.eventNamespace="trumbowyg-event",a.keys=[],a.tagToButton={},a.tagHandlers=[],a.pasteHandlers=[].concat(a.o.pasteHandlers),a.isIE=-1!==e.userAgent.indexOf("MSIE")||-1!==e.appVersion.indexOf("Trident/"),a.isMac=-1!==e.platform.toUpperCase().indexOf("MAC"),a.init()};a.prototype={DEFAULT_SEMANTIC_MAP:{b:"strong",i:"em",s:"del",strike:"del",div:"p"},init:function(){var e=this;e.height=e.$ta.height(),e.initPlugins();try{e.doc.execCommand("enableObjectResizing",!1,!1),e.doc.execCommand("defaultParagraphSeparator",!1,"p")}catch(e){}e.buildEditor(),e.buildBtnPane(),e.fixedBtnPaneEvents(),e.buildOverlay(),setTimeout((function(){e.disabled&&e.setDisabled(!0),e.$c.trigger("tbwinit")}))},addBtnDef:function(e,t){this.btnsDef[e]=o.extend(t,this.btnsDef[e]||{})},setupUrlPrefix:function(){var e=this.o.urlProtocol;if(e)return"string"!=typeof e?"https://":e.replace("://","")+"://"},buildEditor:function(){var e=this,n=e.o.prefix,r="";e.$box=o("<div/>",{class:n+"box "+n+"editor-visible "+n+e.o.lang+" trumbowyg"}),e.isTextarea=e.$ta.is("textarea"),e.isTextarea?(r=e.$ta.val(),e.$ed=o("<div/>"),e.$box.insertAfter(e.$ta).append(e.$ed,e.$ta)):(e.$ed=e.$ta,r=e.$ed.html(),e.$ta=o("<textarea/>",{name:e.$ta.attr("id"),height:e.height}).val(r),e.$box.insertAfter(e.$ed).append(e.$ta,e.$ed),e.syncCode()),e.$ta.addClass(n+"textarea").attr("tabindex",-1),e.$ed.addClass(n+"editor").attr({contenteditable:!0,dir:e.lang._dir||"ltr"}).html(r),e.o.tabindex&&e.$ed.attr("tabindex",e.o.tabindex),e.$c.is("[placeholder]")&&e.$ed.attr("placeholder",e.$c.attr("placeholder")),e.$c.is("[spellcheck]")&&e.$ed.attr("spellcheck",e.$c.attr("spellcheck")),e.o.resetCss&&e.$ed.addClass(n+"reset-css"),e.o.autogrow||e.$ta.add(e.$ed).css({height:e.height}),e.semanticCode(),e.o.autogrowOnEnter&&e.$ed.addClass(n+"autogrow-on-enter");var i,a=!1,s=!1;e.$ed.on("dblclick","img",e.o.imgDblClickHandler).on("keydown",(function(t){var n=t.which;if(8!==n&&13!==n&&46!==n||e.toggleSpan(!0),!t.ctrlKey&&!t.metaKey||t.altKey){if(e.o.tabToIndent&&"Tab"===t.key)try{return t.shiftKey?e.execCmd("outdent",!0,null):e.execCmd("indent",!0,null),!1}catch(e){}}else{a=!0;var o=e.keys[String.fromCharCode(t.which).toUpperCase()];try{return e.execCmd(o.fn,o.param),!1}catch(e){}}})).on("compositionstart compositionupdate",(function(){s=!0})).on("keyup compositionend",(function(t){if("compositionend"===t.type)s=!1;else if(s)return;var n=t.which;if(!(n>=37&&n<=40)){if(8!==n&&13!==n&&46!==n||e.toggleSpan(),!t.ctrlKey&&!t.metaKey||89!==n&&90!==n)if(a||17===n)void 0===t.which&&e.semanticCode(!1,!1,!0);else{var o=!e.isIE||"compositionend"===t.type;e.semanticCode(!1,o&&13===n),e.$c.trigger("tbwchange")}else e.semanticCode(!1,!0),e.$c.trigger("tbwchange");setTimeout((function(){a=!1}),50)}})).on("mouseup keydown keyup",(function(t){(!t.ctrlKey&&!t.metaKey||t.altKey)&&setTimeout((function(){a=!1}),50),clearTimeout(i),i=setTimeout((function(){e.updateButtonPaneStatus()}),50)})).on("focus blur",(function(t){if("blur"===t.type&&e.clearButtonPaneStatus(),e.$c.trigger("tbw"+t.type),e.o.autogrowOnEnter){if(e.autogrowOnEnterDontClose)return;"focus"===t.type?(e.autogrowOnEnterWasFocused=!0,e.autogrowEditorOnEnter()):e.o.autogrow||(e.$ed.css({height:e.$ed.css("min-height")}),e.$c.trigger("tbwresize"))}})).on("keyup focus",(function(){e.$ta.val().match(/<.*>/)||e.$ed.html().match(/<.*>/)||setTimeout((function(){var t=e.isIE?"<p>":"p";e.doc.execCommand("formatBlock",!1,t),e.syncCode()}),0)})).on("cut drop",(function(){setTimeout((function(){e.semanticCode(!1,!0),e.$c.trigger("tbwchange")}),0)})).on("paste",(function(n){if(e.o.removeformatPasted){n.preventDefault(),t.getSelection&&t.getSelection().deleteFromDocument&&t.getSelection().deleteFromDocument();try{var r=t.clipboardData.getData("Text");try{e.doc.selection.createRange().pasteHTML(r)}catch(t){e.doc.getSelection().getRangeAt(0).insertNode(e.doc.createTextNode(r))}e.$c.trigger("tbwchange",n)}catch(t){e.execCmd("insertText",(n.originalEvent||n).clipboardData.getData("text/plain"))}}o.each(e.pasteHandlers,(function(e,t){t(n)})),setTimeout((function(){e.semanticCode(!1,!0),e.$c.trigger("tbwpaste",n),e.$c.trigger("tbwchange")}),0)})),e.$ta.on("keyup",(function(){e.$c.trigger("tbwchange")})).on("paste",(function(){setTimeout((function(){e.$c.trigger("tbwchange")}),0)})),o(e.doc.body).on("keydown."+e.eventNamespace,(function(t){if(27===t.which&&o("."+n+"modal-box").length>=1)return e.closeModal(),!1}))},autogrowEditorOnEnter:function(){var e=this;e.$ed.removeClass("autogrow-on-enter");var t=e.$ed[0].clientHeight;e.$ed.height("auto");var n=e.$ed[0].scrollHeight;e.$ed.addClass("autogrow-on-enter"),t!==n&&(e.$ed.height(t),setTimeout((function(){e.$ed.css({height:n}),e.$c.trigger("tbwresize")}),0))},buildBtnPane:function(){var e=this,t=e.o.prefix,n=e.$btnPane=o("<div/>",{class:t+"button-pane"});o.each(e.o.btns,(function(r,i){o.isArray(i)||(i=[i]);var a=o("<div/>",{class:t+"button-group "+(i.indexOf("fullscreen")>=0?t+"right":"")});o.each(i,(function(t,n){try{e.isSupportedBtn(n)&&a.append(e.buildBtn(n))}catch(e){}})),a.html().trim().length>0&&n.append(a)})),e.$box.prepend(n)},buildBtn:function(e){var t=this,n=t.o.prefix,r=t.btnsDef[e],i=r.dropdown,a=null==r.hasIcon||r.hasIcon,s=t.lang[e]||e,l=o("<button/>",{type:"button",class:n+e+"-button "+(r.class||"")+(a?"":" "+n+"textual-button"),html:t.hasSvg&&a?'<svg><use xlink:href="'+t.svgPath+"#"+n+(r.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>':t.hideButtonTexts?"":r.text||r.title||t.lang[e]||e,title:(r.title||r.text||s)+(r.key?" ("+(t.isMac?"Cmd":"Ctrl")+" + "+r.key+")":""),tabindex:-1,mousedown:function(){return i&&!o("."+e+"-"+n+"dropdown",t.$box).is(":hidden")||o("body",t.doc).trigger("mousedown"),!((t.$btnPane.hasClass(n+"disable")||t.$box.hasClass(n+"disabled"))&&!o(this).hasClass(n+"active")&&!o(this).hasClass(n+"not-disable")||(t.execCmd((i?"dropdown":r.fn)||e,r.param||e,r.forceCss),1))}});if(i){l.addClass(n+"open-dropdown");var x=n+"dropdown",c={class:x+"-"+e+" "+x+" "+n+"fixed-top "+(r.dropdownClass||"")};c["data-"+x]=e;var d=o("<div/>",c);o.each(i,(function(e,n){t.btnsDef[n]&&t.isSupportedBtn(n)&&d.append(t.buildSubBtn(n))})),t.$box.append(d.hide())}else r.key&&(t.keys[r.key]={fn:r.fn||e,param:r.param||e});return i||(t.tagToButton[(r.tag||e).toLowerCase()]=e),l},buildSubBtn:function(e){var t=this,n=t.o.prefix,r=t.btnsDef[e],i=null==r.hasIcon||r.hasIcon;return r.key&&(t.keys[r.key]={fn:r.fn||e,param:r.param||e}),t.tagToButton[(r.tag||e).toLowerCase()]=e,o("<button/>",{type:"button",class:n+e+"-dropdown-button "+(r.class||"")+(r.ico?" "+n+r.ico+"-button":""),html:t.hasSvg&&i?'<svg><use xlink:href="'+t.svgPath+"#"+n+(r.ico||e).replace(/([A-Z]+)/g,"-$1").toLowerCase()+'"/></svg>'+(r.text||r.title||t.lang[e]||e):r.text||r.title||t.lang[e]||e,title:r.key?"("+(t.isMac?"Cmd":"Ctrl")+" + "+r.key+")":null,style:r.style||null,mousedown:function(){return o("body",t.doc).trigger("mousedown"),t.execCmd(r.fn||e,r.param||e,r.forceCss),!1}})},isSupportedBtn:function(e){try{return this.btnsDef[e].isSupported()}catch(e){}return!0},buildOverlay:function(){var e=this;return e.$overlay=o("<div/>",{class:e.o.prefix+"overlay"}).appendTo(e.$box),e.$overlay},showOverlay:function(){var e=this;o(t).trigger("scroll"),e.$overlay.fadeIn(200),e.$box.addClass(e.o.prefix+"box-blur")},hideOverlay:function(){var e=this;e.$overlay.fadeOut(50),e.$box.removeClass(e.o.prefix+"box-blur")},fixedBtnPaneEvents:function(){var e=this,n=e.o.fixedFullWidth,r=e.$box;e.o.fixedBtnPane&&(e.isFixed=!1,o(t).on("scroll."+e.eventNamespace+" resize."+e.eventNamespace,(function(){if(r){e.syncCode();var i=o(t).scrollTop(),a=r.offset().top+1,s=e.$btnPane,l=s.outerHeight()-2;i-a>0&&i-a-e.height<0?(e.isFixed||(e.isFixed=!0,s.css({position:"fixed",top:0,left:n?0:"auto",zIndex:7}),e.$box.css({paddingTop:s.height()})),s.css({width:n?"100%":r.width()-1}),o("."+e.o.prefix+"fixed-top",r).css({position:n?"fixed":"absolute",top:n?l:l+(i-a),zIndex:15})):e.isFixed&&(e.isFixed=!1,s.removeAttr("style"),e.$box.css({paddingTop:0}),o("."+e.o.prefix+"fixed-top",r).css({position:"absolute",top:l}))}})))},setDisabled:function(e){var t=this,n=t.o.prefix;t.disabled=e,e?t.$ta.attr("disabled",!0):t.$ta.removeAttr("disabled"),t.$box.toggleClass(n+"disabled",e),t.$ed.attr("contenteditable",!e)},destroy:function(){var e=this,n=e.o.prefix;e.isTextarea?e.$box.after(e.$ta.css({height:""}).val(e.html()).removeClass(n+"textarea").show()):e.$box.after(e.$ed.css({height:""}).removeClass(n+"editor").removeAttr("contenteditable").removeAttr("dir").html(e.html()).show()),e.$ed.off("dblclick","img"),e.destroyPlugins(),e.$box.remove(),e.$c.removeData("trumbowyg"),o("body").removeClass(n+"body-fullscreen"),e.$c.trigger("tbwclose"),o(t).off("scroll."+e.eventNamespace+" resize."+e.eventNamespace),o(e.doc.body).off("keydown."+e.eventNamespace)},empty:function(){this.$ta.val(""),this.syncCode(!0)},toggle:function(){var e=this,t=e.o.prefix;e.o.autogrowOnEnter&&(e.autogrowOnEnterDontClose=!e.$box.hasClass(t+"editor-hidden")),e.semanticCode(!1,!0),e.$c.trigger("tbwchange"),setTimeout((function(){e.doc.activeElement.blur(),e.$box.toggleClass(t+"editor-hidden "+t+"editor-visible"),e.$btnPane.toggleClass(t+"disable"),o("."+t+"viewHTML-button",e.$btnPane).toggleClass(t+"active"),e.$box.hasClass(t+"editor-visible")?e.$ta.attr("tabindex",-1):e.$ta.removeAttr("tabindex"),e.o.autogrowOnEnter&&!e.autogrowOnEnterDontClose&&e.autogrowEditorOnEnter()}),0)},toggleSpan:function(e){this.$ed.find("span").each((function(){!0===e?o(this).attr("data-tbw-flag",!0):o(this).attr("data-tbw-flag")?o(this).removeAttr("data-tbw-flag"):o(this).contents().unwrap()}))},dropdown:function(e){var n=this,r=o("body",n.doc),i=n.o.prefix,a=o("[data-"+i+"dropdown="+e+"]",n.$box),s=o("."+i+e+"-button",n.$btnPane),l=a.is(":hidden");if(r.trigger("mousedown"),l){var x=s.offset().left;s.addClass(i+"active"),a.css({position:"absolute",top:s.offset().top-n.$btnPane.offset().top+s.outerHeight(),left:n.o.fixedFullWidth&&n.isFixed?x:x-n.$btnPane.offset().left}).show(),o(t).trigger("scroll"),r.on("mousedown."+n.eventNamespace,(function(e){a.is(e.target)||(o("."+i+"dropdown",n.$box).hide(),o("."+i+"active",n.$btnPane).removeClass(i+"active"),r.off("mousedown."+n.eventNamespace))}))}},html:function(e){var t=this;return null!=e?(t.$ta.val(e),t.syncCode(!0),t.$c.trigger("tbwchange"),t):t.$ta.val()},syncTextarea:function(){var e=this;e.$ta.val(e.$ed.text().trim().length>0||e.$ed.find(e.o.tagsToKeep.join(",")).length>0?e.$ed.html():"")},syncCode:function(e){var t=this;if(!e&&t.$ed.is(":visible"))t.syncTextarea();else{var n=o("<div>").html(t.$ta.val()),r=o("<div>").append(n);o(t.o.tagsToRemove.join(","),r).remove(),t.$ed.html(r.contents().html())}if(t.o.autogrow&&(t.height=t.$ed.height(),t.height!==t.$ta.css("height")&&(t.$ta.css({height:t.height}),t.$c.trigger("tbwresize"))),t.o.autogrowOnEnter){t.$ed.height("auto");var i=t.autogrowOnEnterWasFocused?t.$ed[0].scrollHeight:t.$ed.css("min-height");i!==t.$ta.css("height")&&(t.$ed.css({height:i}),t.$c.trigger("tbwresize"))}},semanticCode:function(e,t,n){var r=this;r.saveRange(),r.syncCode(e);var i=!0;if(r.range&&r.range.collapsed&&(i=!1),r.o.semantic){if(r.semanticTag("b",r.o.semanticKeepAttributes),r.semanticTag("i",r.o.semanticKeepAttributes),r.semanticTag("s",r.o.semanticKeepAttributes),r.semanticTag("strike",r.o.semanticKeepAttributes),t){var a=r.o.inlineElementsSelector,s=":not("+a+")";r.$ed.contents().filter((function(){return 3===this.nodeType&&this.nodeValue.trim().length>0})).wrap("<span data-tbw/>");var l=function(e){if(0!==e.length){var t=e.nextUntil(s).addBack().wrapAll("<p/>").parent(),n=t.nextAll(a).first();t.next("br").remove(),l(n)}};l(r.$ed.children(a).first()),r.semanticTag("div",!0),o("[data-tbw]",r.$ed).contents().unwrap(),r.$ed.find("p:empty").remove()}!n&&i&&r.restoreRange(),r.syncTextarea()}},semanticTag:function(e,t,n){var r,i=this,a=e;if(null!=this.o.semantic&&"object"==typeof this.o.semantic&&this.o.semantic.hasOwnProperty(e))r=this.o.semantic[e];else{if(!0!==this.o.semantic||!this.DEFAULT_SEMANTIC_MAP.hasOwnProperty(e))return;r=this.DEFAULT_SEMANTIC_MAP[e]}n&&(e=r,r=a),o(e,this.$ed).each((function(){var e=!1,n=o(this);if(0===n.contents().length)return!1;i.range&&i.range.startContainer.parentNode===this&&(e=!0);var a=o("<"+r+"/>");a.insertBefore(n),t&&o.each(n.prop("attributes"),(function(){a.attr(this.name,this.value)})),a.html(n.html()),n.remove(),!0===e&&(i.range.selectNodeContents(a.get(0)),i.range.collapse(!1))}))},createLink:function(){for(var e,t,n,r=this,i=r.doc.getSelection(),a=i.getRangeAt(0),s=i.focusNode,l=(new XMLSerializer).serializeToString(a.cloneContents())||a+"";["A","DIV"].indexOf(s.nodeName)<0;)s=s.parentNode;if(s&&"A"===s.nodeName){var x=o(s);l=x.text(),e=x.attr("href"),r.o.minimalLinks||(t=x.attr("title"),n=x.attr("target")||r.o.defaultLinkTarget);var c=r.doc.createRange();c.selectNode(s),i.removeAllRanges(),i.addRange(c)}r.saveRange();var d={url:{label:r.lang.linkUrl||"URL",required:!0,value:e},text:{label:r.lang.text,value:l}};r.o.minimalLinks||o.extend(d,{title:{label:r.lang.title,value:t},target:{label:r.lang.target,value:n}}),r.openModalInsert(r.lang.createLink,d,(function(e){var t=r.prependUrlPrefix(e.url);if(!t.length)return!1;var n=o(['<a href="',t,'">',e.text||e.url,"</a>"].join(""));return e.title&&n.attr("title",e.title),(e.target||r.o.defaultLinkTarget)&&n.attr("target",e.target||r.o.defaultLinkTarget),r.range.deleteContents(),r.range.insertNode(n[0]),r.syncCode(),r.$c.trigger("tbwchange"),!0}))},prependUrlPrefix:function(e){return this.urlPrefix?/^([a-z][-+.a-z0-9]*:|\/|#)/i.test(e)?e:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?"mailto:"+e:this.urlPrefix+e:e},unlink:function(){var e=this,t=e.doc.getSelection(),n=t.focusNode;if(t.isCollapsed){for(;["A","DIV"].indexOf(n.nodeName)<0;)n=n.parentNode;if(n&&"A"===n.nodeName){var o=e.doc.createRange();o.selectNode(n),t.removeAllRanges(),t.addRange(o)}}e.execCmd("unlink",void 0,void 0,!0)},insertImage:function(){var e=this;e.saveRange();var t={url:{label:"URL",required:!0},alt:{label:e.lang.description,value:e.getRangeText()}};e.o.imageWidthModalEdit&&(t.width={}),e.openModalInsert(e.lang.insertImage,t,(function(t){e.execCmd("insertImage",t.url,!1,!0);var n=o('img[src="'+t.url+'"]:not([alt])',e.$box);return n.attr("alt",t.alt),e.o.imageWidthModalEdit&&n.attr({width:t.width}),e.syncCode(),e.$c.trigger("tbwchange"),!0}))},fullscreen:function(){var e,n=this,r=n.o.prefix,i=r+"fullscreen",a=i+"-placeholder",s=n.$box.outerHeight();n.$box.toggleClass(i),(e=n.$box.hasClass(i))?n.$box.before(o("<div/>",{class:a}).css({height:s})):o("."+a).remove(),o("body").toggleClass(r+"body-fullscreen",e),o(t).trigger("scroll"),n.$c.trigger("tbw"+(e?"open":"close")+"fullscreen")},execCmd:function(e,n,r,i){var a=this;i=!!i||"","dropdown"!==e&&a.$ed.focus(),"strikethrough"===e&&a.o.semantic&&a.semanticTag("strike",a.o.semanticKeepAttributes,!0);try{a.doc.execCommand("styleWithCSS",!1,r||!1)}catch(e){}try{a[e+i](n)}catch(r){try{e(n)}catch(r){"insertHorizontalRule"===e?n=void 0:"formatBlock"===e&&a.isIE&&(n="<"+n+">"),a.doc.execCommand(e,!1,n),a.syncCode(),a.semanticCode(!1,!0);try{var s=t.getSelection().focusNode;o(t.getSelection().focusNode.parentNode).hasClass("trumbowyg-editor")||(s=t.getSelection().focusNode.parentNode);var l=a.o.tagClasses[n];l&&o(s).addClass(l)}catch(e){}}"dropdown"!==e&&(a.updateButtonPaneStatus(),a.$c.trigger("tbwchange"))}},openModal:function(e,n,a){var s=this,l=s.o.prefix;if(a=!1!==a,o("."+l+"modal-box",s.$box).length>0)return!1;s.o.autogrowOnEnter&&(s.autogrowOnEnterDontClose=!0),s.saveRange(),s.showOverlay(),s.$btnPane.addClass(l+"disable");var x,c=o("<div/>",{class:l+"modal "+l+"fixed-top"}).css({top:s.$box.offset().top+s.$btnPane.height(),zIndex:99999}).appendTo(o(s.doc.body));s.$overlay.one("click",(function(){return c.trigger(i),!1})),x=a?o("<form/>",{action:"",html:n}).on("submit",(function(){return c.trigger(r),!1})).on("reset",(function(){return c.trigger(i),!1})).on("submit reset",(function(){s.o.autogrowOnEnter&&(s.autogrowOnEnterDontClose=!1)})):n;var d=o("<div/>",{class:l+"modal-box",html:x}).css({top:"-"+s.$btnPane.outerHeight(),opacity:0,paddingBottom:a?null:"5%"}).appendTo(c).animate({top:0,opacity:1},100);return e&&o("<span/>",{text:e,class:l+"modal-title"}).prependTo(d),a&&(o(":input:first",d).focus(),s.buildModalBtn("submit",d),s.buildModalBtn("reset",d),c.height(d.outerHeight()+10)),o(t).trigger("scroll"),s.$c.trigger("tbwmodalopen"),c},buildModalBtn:function(e,t){var n=this.o.prefix;return o("<button/>",{class:n+"modal-button "+n+"modal-"+e,type:e,text:this.lang[e]||e}).appendTo(o("form",t))},closeModal:function(){var e=this,t=e.o.prefix;e.$btnPane.removeClass(t+"disable"),e.$overlay.off();var n=o("."+t+"modal-box",o(e.doc.body));n.animate({top:"-"+n.height()},100,(function(){n.parent().remove(),e.hideOverlay(),e.$c.trigger("tbwmodalclose")})),e.restoreRange()},openModalInsert:function(e,t,n){var a=this,s=a.o.prefix,l=a.lang,x="",c=s+"form-"+Date.now()+"-";return o.each(t,(function(e,t){var n=t.label||e,o=t.name||e,r=t.attributes||{},i=c+e,a=Object.keys(r).map((function(e){return e+'="'+r[e]+'"'})).join(" ");"function"==typeof t.type?(t.name||(t.name=o),x+=t.type(t,i,s,l)):(x+='<div class="'+s+'input-row"><div class="'+s+'input-infos"><label for="'+i+'"><span>'+(l[n]?l[n]:n)+'</span></label></div><div class="'+s+'input-html"><input id="'+i+'" type="'+(t.type||"text")+'" name="'+o+'" '+a,x+=("checkbox"===t.type&&t.value?' checked="checked"':"")+' value="'+(t.value||"").replace(/"/g,"&quot;")+'"></div>',x+="</div>")})),a.openModal(e,x).on(r,(function(){var e=o("form",o(this)),i=!0,s={};o.each(t,(function(t,n){var r=n.name||t,l=o(':input[name="'+r+'"]',e);switch(l[0].type.toLowerCase()){case"checkbox":s[r]=l.is(":checked");break;case"radio":s[r]=l.filter(":checked").val();break;default:s[r]=o.trim(l.val())}n.required&&""===s[r]?(i=!1,a.addErrorOnModalField(l,a.lang.required)):n.pattern&&!n.pattern.test(s[r])&&(i=!1,a.addErrorOnModalField(l,n.patternError))})),i&&(a.restoreRange(),n(s,t)&&(a.syncCode(),a.$c.trigger("tbwchange"),a.closeModal(),o(this).off(r)))})).one(i,(function(){o(this).off(r),a.closeModal()}))},addErrorOnModalField:function(e,t){var n=this.o.prefix,r=n+"msg-error",i=e.closest("."+n+"input-row");e.on("change keyup",(function(){i.removeClass(n+"input-error"),setTimeout((function(){i.find("."+r).remove()}),150)})),i.addClass(n+"input-error").find("."+n+"input-infos label").append(o("<span/>",{class:r,text:t}))},getDefaultImgDblClickHandler:function(){var e=this;return function(){var t=o(this),n=t.attr("src"),r="(Base64)";0===n.indexOf("data:image")&&(n=r);var i={url:{label:"URL",value:n,required:!0},alt:{label:e.lang.description,value:t.attr("alt")}};return e.o.imageWidthModalEdit&&(i.width={value:t.attr("width")?t.attr("width"):""}),e.openModalInsert(e.lang.insertImage,i,(function(n){return n.url!==r&&t.attr({src:n.url}),t.attr({alt:n.alt}),e.o.imageWidthModalEdit&&(parseInt(n.width)>0?t.attr({width:n.width}):t.removeAttr("width")),!0})),!1}},saveRange:function(){var e=this,t=e.doc.getSelection();if(e.range=null,t&&t.rangeCount){var n,o=e.range=t.getRangeAt(0),r=e.doc.createRange();r.selectNodeContents(e.$ed[0]),r.setEnd(o.startContainer,o.startOffset),n=(r+"").length,e.metaRange={start:n,end:n+(o+"").length}}},restoreRange:function(){var e,t=this,n=t.metaRange,o=t.range,r=t.doc.getSelection();if(o){if(n&&n.start!==n.end){var i,a=0,s=[t.$ed[0]],l=!1,x=!1;for(e=t.doc.createRange();!x&&(i=s.pop());)if(3===i.nodeType){var c=a+i.length;!l&&n.start>=a&&n.start<=c&&(e.setStart(i,n.start-a),l=!0),l&&n.end>=a&&n.end<=c&&(e.setEnd(i,n.end-a),x=!0),a=c}else for(var d=i.childNodes,u=d.length;u>0;)u-=1,s.push(d[u])}try{r.removeAllRanges()}catch(e){}r.addRange(e||o)}},getRangeText:function(){return this.range+""},clearButtonPaneStatus:function(){var e=this,t=e.o.prefix,n=t+"active-button "+t+"active",r=t+"original-icon";o("."+t+"active-button",e.$btnPane).removeClass(n),o("."+r,e.$btnPane).each((function(){o(this).find("svg use").attr("xlink:href",o(this).data(r))}))},updateButtonPaneStatus:function(){var e=this,t=e.o.prefix,n=t+"active-button "+t+"active",r=t+"original-icon",i=e.getTagsRecursive(e.doc.getSelection().focusNode);e.clearButtonPaneStatus(),o.each(i,(function(i,a){var s=e.tagToButton[a.toLowerCase()],l=o("."+t+s+"-button",e.$btnPane);if(l.length>0)l.addClass(n);else try{var x=(l=o("."+t+"dropdown ."+t+s+"-dropdown-button",e.$box)).find("svg use"),c=l.parent().data(t+"dropdown"),d=o("."+t+c+"-button",e.$box),u=d.find("svg use");d.addClass(n),e.o.changeActiveDropdownIcon&&x.length>0&&(d.addClass(r).data(r,u.attr("xlink:href")),u.attr("xlink:href",x.attr("xlink:href")))}catch(e){}}))},getTagsRecursive:function(e,t){var n=this;if(t=t||(e&&e.tagName?[e.tagName]:[]),!e||!e.parentNode)return t;var r=(e=e.parentNode).tagName;return"DIV"===r?t:("P"===r&&""!==e.style.textAlign&&t.push(e.style.textAlign),o.each(n.tagHandlers,(function(o,r){t=t.concat(r(e,n))})),t.push(r),n.getTagsRecursive(e,t).filter((function(e){return null!=e})))},initPlugins:function(){var e=this;e.loadedPlugins=[],o.each(o.trumbowyg.plugins,(function(t,n){n.shouldInit&&!n.shouldInit(e)||(n.init(e),n.tagHandler&&e.tagHandlers.push(n.tagHandler),e.loadedPlugins.push(n))}))},destroyPlugins:function(){var e=this;o.each(this.loadedPlugins,(function(t,n){n.destroy&&n.destroy(e)}))}}}(navigator,window,document,jQuery)},449:function(){!function(e){"use strict";var t={allowedTags:[],removableTags:["a","abbr","address","b","bdi","bdo","blockquote","br","cite","code","del","dfn","details","em","h1","h2","h3","h4","h5","h6","hr","i","ins","kbd","mark","meter","pre","progress","q","rp","rt","ruby","s","samp","small","span","strong","sub","summary","sup","time","u","var","wbr","img","map","area","canvas","figcaption","figure","picture","audio","source","track","video","ul","ol","li","dl","dt","dd","table","caption","th","tr","td","thead","tbody","tfoot","col","colgroup","style","div","p","form","input","textarea","button","select","optgroup","option","label","fieldset","legend","datalist","keygen","output","iframe","link","nav","header","hgroup","footer","main","section","article","aside","dialog","script","noscript","embed","object","param"]};e.extend(!0,e.trumbowyg,{plugins:{allowTagsFromPaste:{init:function(n){if(n.o.plugins.allowTagsFromPaste){n.o.removeformatPasted=!1;var o=n.o.plugins.allowTagsFromPaste.allowedTags||t.allowedTags,r=n.o.plugins.allowTagsFromPaste.removableTags||t.removableTags;if(0!==o.length){var i=e(r).not(o).get();n.pasteHandlers.push((function(){setTimeout((function(){var t=n.$ed.html();e.each(i,(function(e,n){t=t.replace(new RegExp("<\\/?"+n+"(\\s[^>]*)?>","gi"),"")})),n.$ed.html(t)}),0)}))}}}}}})}(jQuery)},932:function(){!function(e){"use strict";e.extend(!0,e.trumbowyg,{plugins:{cleanPaste:{init:function(t){t.pasteHandlers.push((function(n){setTimeout((function(){try{t.saveRange();var o=(n.originalEvent||n).clipboardData.getData("Text"),r=t.doc.getSelection().focusNode,i=t.doc.createRange(),a=((l=(l=(l=(l=(l=(l=(l=(l=(l=o.trim()).replace(/<[^> ]*/g,(function(e){return e.toLowerCase()})).replace(/<[^>]*>/g,(function(e){return e.replace(/ [^=]+=/g,(function(e){return e.toLowerCase()}))})).replace(/<[^>]*>/g,(function(e){return e.replace(/( [^=]+=)([^"][^ >]*)/g,'$1"$2"')}))).replace(/<b(\s+|>)/g,"<strong$1")).replace(/<\/b(\s+|>)/g,"</strong$1")).replace(/<i(\s+|>)/g,"<em$1")).replace(/<\/i(\s+|>)/g,"</em$1")).replace(/<!(?:--[\s\S]*?--\s*)?>\s*/g,"")).replace(/&nbsp;/gi," ")).replace(/ <\//gi,"</")).replace(/\s+/g," "),(l=(l=(l=(l=(l=l.replace(/^\s*|\s*$/g,"")).replace(/<[^>]*>/g,(function(e){return e.replace(/ ([^=]+)="[^"]*"/g,(function(e,t){return-1!==["alt","href","src","title"].indexOf(t)?e:""}))}))).replace(/<\?xml[^>]*>/g,"")).replace(/<[^ >]+:[^>]*>/g,"")).replace(/<\/[^ >]+:[^>]*>/g,"")).replace(/<(div|span|style|meta|link).*?>/gi,"")),s=e(a)[0]||t.doc.createTextNode(a);""===t.$ed.html()?t.$ed[0].appendChild(s):(i.setStartAfter(r),i.setEndAfter(r),t.doc.getSelection().removeAllRanges(),t.doc.getSelection().addRange(i),t.range.insertNode(s)),(i=t.doc.createRange()).setStartAfter(s),i.setEndAfter(s),t.doc.getSelection().removeAllRanges(),t.doc.getSelection().addRange(i),n.stopPropagation(),n.preventDefault(),t.saveRange(),t.syncCode(),t.$c.trigger("tbwchange")}catch(e){}var l}),0)}))}}}})}(jQuery)},414:function(){!function(e){"use strict";function t(e){return("0"+parseInt(e).toString(16)).slice(-2)}function n(e){return-1===e.search("rgb")?e.replace("#",""):"rgba(0, 0, 0, 0)"===e?"transparent":t((e=e.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d?(.\d+)))?\)$/))[1])+t(e[2])+t(e[3])}e.extend(!0,e.trumbowyg,{langs:{en:{foreColor:"Text color",backColor:"Background color",foreColorRemove:"Remove text color",backColorRemove:"Remove background color"},cs:{foreColor:"Barva textu",backColor:"Barva pozadí"},da:{foreColor:"Tekstfarve",backColor:"Baggrundsfarve"},de:{foreColor:"Textfarbe",backColor:"Hintergrundfarbe"},et:{foreColor:"Teksti värv",backColor:"Taustavärv",foreColorRemove:"Eemalda teksti värv",backColorRemove:"Eemalda taustavärv"},fr:{foreColor:"Couleur du texte",backColor:"Couleur de fond",foreColorRemove:"Supprimer la couleur du texte",backColorRemove:"Supprimer la couleur de fond"},hu:{foreColor:"Betű szín",backColor:"Háttér szín",foreColorRemove:"Betű szín eltávolítása",backColorRemove:"Háttér szín eltávolítása"},ja:{foreColor:"文字色",backColor:"背景色"},ko:{foreColor:"글자색",backColor:"배경색",foreColorRemove:"글자색 지우기",backColorRemove:"배경색 지우기"},nl:{foreColor:"Tekstkleur",backColor:"Achtergrondkleur"},pt_br:{foreColor:"Cor de fonte",backColor:"Cor de fundo"},ru:{foreColor:"Цвет текста",backColor:"Цвет выделения текста"},sk:{foreColor:"Farba textu",backColor:"Farba pozadia"},tr:{foreColor:"Yazı rengi",backColor:"Arka plan rengi",foreColorRemove:"Yazı rengini kaldır",backColorRemove:"Arka plan rengini kaldır"},zh_cn:{foreColor:"文字颜色",backColor:"背景颜色"},zh_tw:{foreColor:"文字顏色",backColor:"背景顏色"}}});var o={colorList:["ffffff","000000","eeece1","1f497d","4f81bd","c0504d","9bbb59","8064a2","4bacc6","f79646","ffff00","f2f2f2","7f7f7f","ddd9c3","c6d9f0","dbe5f1","f2dcdb","ebf1dd","e5e0ec","dbeef3","fdeada","fff2ca","d8d8d8","595959","c4bd97","8db3e2","b8cce4","e5b9b7","d7e3bc","ccc1d9","b7dde8","fbd5b5","ffe694","bfbfbf","3f3f3f","938953","548dd4","95b3d7","d99694","c3d69b","b2a2c7","b7dde8","fac08f","f2c314","a5a5a5","262626","494429","17365d","366092","953734","76923c","5f497a","92cddc","e36c09","c09100","7f7f7f","0c0c0c","1d1b10","0f243e","244061","632423","4f6128","3f3151","31859b","974806","7f6000"],foreColorList:null,backColorList:null,allowCustomForeColor:!0,allowCustomBackColor:!0,displayAsList:!1};function r(t,n){var o=[],r=n.o.plugins.colors,i=r[t+"List"]||r.colorList;e.each(i,(function(e,i){var a=t+i,s={fn:t,forceCss:!0,hasIcon:!1,text:n.lang["#"+i]||"#"+i,param:"#"+i,style:"background-color: #"+i+";"};r.displayAsList&&"foreColor"===t&&(s.style="color: #"+i+" !important;"),n.addBtnDef(a,s),o.push(a)}));var a=t+"Remove",s={fn:"removeFormat",hasIcon:!1,param:t,style:"background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAG0lEQVQIW2NkQAAfEJMRmwBYhoGBYQtMBYoAADziAp0jtJTgAAAAAElFTkSuQmCC);"};if(r.displayAsList&&(s.style=""),n.addBtnDef(a,s),o.push(a),r["allowCustom"+t.charAt(0).toUpperCase()+t.substr(1)]){var l=t+"Free",x={fn:function(){n.openModalInsert(n.lang[t],{color:{label:t,forceCss:!0,type:"color",value:"#FFFFFF"}},(function(e){return n.execCmd(t,e.color),!0}))},hasIcon:!1,text:"#",style:"text-indent: 0; line-height: 20px; padding: 0 5px;"};n.addBtnDef(l,x),o.push(l)}return o}e.extend(!0,e.trumbowyg,{plugins:{color:{init:function(e){e.o.plugins.colors=e.o.plugins.colors||o;var t=e.o.plugins.colors.displayAsList?e.o.prefix+"dropdown--color-list":"",n={dropdown:r("foreColor",e),dropdownClass:t},i={dropdown:r("backColor",e),dropdownClass:t};e.addBtnDef("foreColor",n),e.addBtnDef("backColor",i)},tagHandler:function(e,t){var o,r=[];if(!e.style)return r;if(""!==e.style.backgroundColor){var i=n(e.style.backgroundColor);t.o.plugins.colors.colorList.indexOf(i)>=0?r.push("backColor"+i):r.push("backColorFree")}return""!==e.style.color?o=n(e.style.color):e.hasAttribute("color")&&(o=n(e.getAttribute("color"))),o&&(t.o.plugins.colors.colorList.indexOf(o)>=0?r.push("foreColor"+o):r.push("foreColorFree")),r}}}})}(jQuery)},286:function(){!function(e){"use strict";var t={emojiList:["&#x2049","&#x2122","&#x2139","&#x2194","&#x2195","&#x2196","&#x2197","&#x2198","&#x2199","&#x2328","&#x2600","&#x2601","&#x2602","&#x2603","&#x2604","&#x2611","&#x2614","&#x2615","&#x2618","&#x2620","&#x2622","&#x2623","&#x2626","&#x2638","&#x2639","&#x2640","&#x2642","&#x2648","&#x2649","&#x2650","&#x2651","&#x2652","&#x2653","&#x2660","&#x2663","&#x2665","&#x2666","&#x2668","&#x2692","&#x2693","&#x2694","&#x2695","&#x2696","&#x2697","&#x2699","&#x2702","&#x2705","&#x2708","&#x2709","&#x2712","&#x2714","&#x2716","&#x2721","&#x2728","&#x2733","&#x2734","&#x2744","&#x2747","&#x2753","&#x2754","&#x2755","&#x2757","&#x2763","&#x2764","&#x2795","&#x2796","&#x2797","&#x2934","&#x2935","&#x3030","&#x3297","&#x3299","&#x1F9E1","&#x1F49B","&#x1F49A","&#x1F499","&#x1F49C","&#x1F5A4","&#x1F90E","&#x1F90D","&#x1F494","&#x1F495","&#x1F49E","&#x1F493","&#x1F497","&#x1F496","&#x1F498","&#x1F49D","&#x1F49F","&#x262E","&#x271D","&#x262A","&#x1F549","&#x1F52F","&#x1F54E","&#x262F","&#x1F6D0","&#x26CE","&#x264A","&#x264B","&#x264C","&#x264D","&#x264E","&#x264F","&#x1F194","&#x269B","&#x1F251","&#x1F4F4","&#x1F4F3","&#x1F236","&#x1F21A","&#x1F238","&#x1F23A","&#x1F237","&#x1F19A","&#x1F4AE","&#x1F250","&#x1F234","&#x1F235","&#x1F239","&#x1F232","&#x1F170","&#x1F171","&#x1F18E","&#x1F191","&#x1F17E","&#x1F198","&#x274C","&#x2B55","&#x1F6D1","&#x26D4","&#x1F4DB","&#x1F6AB","&#x1F4AF","&#x1F4A2","&#x1F6B7","&#x1F6AF","&#x1F6B3","&#x1F6B1","&#x1F51E","&#x1F4F5","&#x1F6AD","&#x203C","&#x1F505","&#x1F506","&#x303D","&#x26A0","&#x1F6B8","&#x1F531","&#x269C","&#x1F530","&#x267B","&#x1F22F","&#x1F4B9","&#x274E","&#x1F310","&#x1F4A0","&#x24C2","&#x1F300","&#x1F4A4","&#x1F3E7","&#x1F6BE","&#x267F","&#x1F17F","&#x1F233","&#x1F202","&#x1F6C2","&#x1F6C3","&#x1F6C4","&#x1F6C5","&#x1F6B9","&#x1F6BA","&#x1F6BC","&#x1F6BB","&#x1F6AE","&#x1F3A6","&#x1F4F6","&#x1F201","&#x1F523","&#x1F524","&#x1F521","&#x1F520","&#x1F196","&#x1F197","&#x1F199","&#x1F192","&#x1F195","&#x1F193","&#x0030","&#x0031","&#x0032","&#x0033","&#x0034","&#x0035","&#x0036","&#x0037","&#x0038","&#x0039","&#x1F51F","&#x1F522","&#x0023","&#x002A","&#x23CF","&#x25B6","&#x23F8","&#x23EF","&#x23F9","&#x23FA","&#x23ED","&#x23EE","&#x23E9","&#x23EA","&#x23EB","&#x23EC","&#x25C0","&#x1F53C","&#x1F53D","&#x27A1","&#x2B05","&#x2B06","&#x2B07","&#x21AA","&#x21A9","&#x1F500","&#x1F501","&#x1F502","&#x1F504","&#x1F503","&#x1F3B5","&#x1F3B6","&#x267E","&#x1F4B2","&#x1F4B1","&#x00A9","&#x00AE","&#x27B0","&#x27BF","&#x1F51A","&#x1F519","&#x1F51B","&#x1F51D","&#x1F51C","&#x1F518","&#x26AA","&#x26AB","&#x1F534","&#x1F535","&#x1F7E4","&#x1F7E3","&#x1F7E2","&#x1F7E1","&#x1F7E0","&#x1F53A","&#x1F53B","&#x1F538","&#x1F539","&#x1F536","&#x1F537","&#x1F533","&#x1F532","&#x25AA","&#x25AB","&#x25FE","&#x25FD","&#x25FC","&#x25FB","&#x2B1B","&#x2B1C","&#x1F7E7","&#x1F7E6","&#x1F7E5","&#x1F7EB","&#x1F7EA","&#x1F7E9","&#x1F7E8","&#x1F508","&#x1F507","&#x1F509","&#x1F50A","&#x1F514","&#x1F515","&#x1F4E3","&#x1F4E2","&#x1F5E8","&#x1F441","&#x1F4AC","&#x1F4AD","&#x1F5EF","&#x1F0CF","&#x1F3B4","&#x1F004","&#x1F550","&#x1F551","&#x1F552","&#x1F553","&#x1F554","&#x1F555","&#x1F556","&#x1F557","&#x1F558","&#x1F559","&#x1F55A","&#x1F55B","&#x1F55C","&#x1F55D","&#x1F55E","&#x1F55F","&#x1F560","&#x1F561","&#x1F562","&#x1F563","&#x1F564","&#x1F565","&#x1F566","&#x1F567","&#x26BD","&#x1F3C0","&#x1F3C8","&#x26BE","&#x1F94E","&#x1F3BE","&#x1F3D0","&#x1F3C9","&#x1F94F","&#x1F3B1","&#x1F3D3","&#x1F3F8","&#x1F3D2","&#x1F3D1","&#x1F94D","&#x1F3CF","&#x1F945","&#x26F3","&#x1F3F9","&#x1F3A3","&#x1F94A","&#x1F94B","&#x1F3BD","&#x1F6F9","&#x1F6F7","&#x1FA82","&#x26F8","&#x1F94C","&#x1F3BF","&#x26F7","&#x1F3C2","&#x1F3CB","&#x1F93C","&#x1F938","&#x26F9","&#x1F93A","&#x1F93E","&#x1F3CC","&#x1F3C7","&#x1F9D8","&#x1F3C4","&#x1F3CA","&#x1F93D","&#x1F6A3","&#x1F9D7","&#x1F6B5","&#x1F6B4","&#x1F3C6","&#x1F947","&#x1F948","&#x1F949","&#x1F3C5","&#x1F396","&#x1F3F5","&#x1F397","&#x1F3AB","&#x1F39F","&#x1F3AA","&#x1F939","&#x1F3AD","&#x1F3A8","&#x1F3AC","&#x1F3A4","&#x1F3A7","&#x1F3BC","&#x1F3B9","&#x1F941","&#x1F3B7","&#x1F3BA","&#x1FA95","&#x1F3B8","&#x1F3BB","&#x1F3B2","&#x265F","&#x1F3AF","&#x1FA81","&#x1FA80","&#x1F3B3","&#x1F3AE","&#x1F3B0","&#x1F9E9","&#x231A","&#x1F4F1","&#x1F4F2","&#x1F4BB","&#x1F5A5","&#x1F5A8","&#x1F5B1","&#x1F5B2","&#x1F579","&#x1F5DC","&#x1F4BD","&#x1F4BE","&#x1F4BF","&#x1F4C0","&#x1F4FC","&#x1F4F7","&#x1F4F8","&#x1F4F9","&#x1F3A5","&#x1F4FD","&#x1F39E","&#x1F4DE","&#x260E","&#x1F4DF","&#x1F4E0","&#x1F4FA","&#x1F4FB","&#x1F399","&#x1F39A","&#x1F39B","&#x1F9ED","&#x23F1","&#x23F2","&#x23F0","&#x1F570","&#x231B","&#x23F3","&#x1F4E1","&#x1F50B","&#x1F50C","&#x1F4A1","&#x1F526","&#x1F56F","&#x1F9EF","&#x1F6E2","&#x1F4B8","&#x1F4B5","&#x1F4B4","&#x1F4B6","&#x1F4B7","&#x1F4B0","&#x1F4B3","&#x1F48E","&#x1F9F0","&#x1F527","&#x1F528","&#x1F6E0","&#x26CF","&#x1F529","&#x1F9F1","&#x26D3","&#x1F9F2","&#x1F52B","&#x1F4A3","&#x1F9E8","&#x1FA93","&#x1FA92","&#x1F52A","&#x1F5E1","&#x1F6E1","&#x1F6AC","&#x26B0","&#x26B1","&#x1F3FA","&#x1FA94","&#x1F52E","&#x1F4FF","&#x1F9FF","&#x1F488","&#x1F52D","&#x1F52C","&#x1F573","&#x1F9AF","&#x1FA7A","&#x1FA79","&#x1F48A","&#x1F489","&#x1FA78","&#x1F9EC","&#x1F9A0","&#x1F9EB","&#x1F9EA","&#x1F321","&#x1FA91","&#x1F9F9","&#x1F9FA","&#x1F9FB","&#x1F6BD","&#x1F6B0","&#x1F6BF","&#x1F6C1","&#x1F6C0","&#x1F9FC","&#x1F9FD","&#x1F9F4","&#x1F6CE","&#x1F511","&#x1F5DD","&#x1F6AA","&#x1F6CB","&#x1F6CF","&#x1F6CC","&#x1F9F8","&#x1F5BC","&#x1F6CD","&#x1F6D2","&#x1F381","&#x1F388","&#x1F38F","&#x1F380","&#x1F38A","&#x1F389","&#x1F38E","&#x1F3EE","&#x1F390","&#x1F9E7","&#x1F4E9","&#x1F4E8","&#x1F4E7","&#x1F48C","&#x1F4E5","&#x1F4E4","&#x1F4E6","&#x1F3F7","&#x1F4EA","&#x1F4EB","&#x1F4EC","&#x1F4ED","&#x1F4EE","&#x1F4EF","&#x1F4DC","&#x1F4C3","&#x1F4C4","&#x1F4D1","&#x1F9FE","&#x1F4CA","&#x1F4C8","&#x1F4C9","&#x1F5D2","&#x1F5D3","&#x1F4C6","&#x1F4C5","&#x1F5D1","&#x1F4C7","&#x1F5C3","&#x1F5F3","&#x1F5C4","&#x1F4CB","&#x1F4C1","&#x1F4C2","&#x1F5C2","&#x1F5DE","&#x1F4F0","&#x1F4D3","&#x1F4D4","&#x1F4D2","&#x1F4D5","&#x1F4D7","&#x1F4D8","&#x1F4D9","&#x1F4DA","&#x1F4D6","&#x1F516","&#x1F9F7","&#x1F517","&#x1F4CE","&#x1F587","&#x1F4D0","&#x1F4CF","&#x1F9EE","&#x1F4CC","&#x1F4CD","&#x1F58A","&#x1F58B","&#x1F58C","&#x1F58D","&#x1F4DD","&#x270F","&#x1F50D","&#x1F50E","&#x1F50F","&#x1F510","&#x1F512","&#x1F513","&#x1F436","&#x1F431","&#x1F42D","&#x1F439","&#x1F430","&#x1F98A","&#x1F43B","&#x1F43C","&#x1F428","&#x1F42F","&#x1F981","&#x1F42E","&#x1F437","&#x1F43D","&#x1F438","&#x1F435","&#x1F648","&#x1F649","&#x1F64A","&#x1F412","&#x1F414","&#x1F427","&#x1F426","&#x1F424","&#x1F423","&#x1F425","&#x1F986","&#x1F985","&#x1F989","&#x1F987","&#x1F43A","&#x1F417","&#x1F434","&#x1F984","&#x1F41D","&#x1F41B","&#x1F98B","&#x1F40C","&#x1F41A","&#x1F41E","&#x1F41C","&#x1F99F","&#x1F997","&#x1F577","&#x1F578","&#x1F982","&#x1F422","&#x1F40D","&#x1F98E","&#x1F996","&#x1F995","&#x1F419","&#x1F991","&#x1F990","&#x1F99E","&#x1F9AA","&#x1F980","&#x1F421","&#x1F420","&#x1F41F","&#x1F42C","&#x1F433","&#x1F40B","&#x1F988","&#x1F40A","&#x1F405","&#x1F406","&#x1F993","&#x1F98D","&#x1F9A7","&#x1F418","&#x1F99B","&#x1F98F","&#x1F42A","&#x1F42B","&#x1F992","&#x1F998","&#x1F403","&#x1F402","&#x1F404","&#x1F40E","&#x1F416","&#x1F40F","&#x1F999","&#x1F411","&#x1F410","&#x1F98C","&#x1F415","&#x1F9AE","&#x1F429","&#x1F408","&#x1F413","&#x1F983","&#x1F99A","&#x1F99C","&#x1F9A2","&#x1F9A9","&#x1F54A","&#x1F407","&#x1F9A5","&#x1F9A6","&#x1F9A8","&#x1F99D","&#x1F9A1","&#x1F401","&#x1F400","&#x1F43F","&#x1F994","&#x1F43E","&#x1F409","&#x1F432","&#x1F335","&#x1F384","&#x1F332","&#x1F333","&#x1F334","&#x1F331","&#x1F33F","&#x1F340","&#x1F38D","&#x1F38B","&#x1F343","&#x1F342","&#x1F341","&#x1F344","&#x1F33E","&#x1F490","&#x1F337","&#x1F339","&#x1F940","&#x1F33A","&#x1F338","&#x1F33C","&#x1F33B","&#x1F31E","&#x1F31D","&#x1F31B","&#x1F31C","&#x1F31A","&#x1F315","&#x1F316","&#x1F317","&#x1F318","&#x1F311","&#x1F312","&#x1F313","&#x1F314","&#x1F319","&#x1F30E","&#x1F30D","&#x1F30F","&#x1FA90","&#x1F4AB","&#x2B50","&#x1F31F","&#x26A1","&#x1F4A5","&#x1F525","&#x1F32A","&#x1F308","&#x1F324","&#x26C5","&#x1F325","&#x1F326","&#x1F327","&#x26C8","&#x1F329","&#x1F328","&#x26C4","&#x1F32C","&#x1F4A8","&#x1F4A7","&#x1F4A6","&#x1F30A","&#x1F32B","&#x1F34F","&#x1F34E","&#x1F350","&#x1F34A","&#x1F34B","&#x1F34C","&#x1F349","&#x1F347","&#x1F353","&#x1F348","&#x1F352","&#x1F351","&#x1F96D","&#x1F34D","&#x1F965","&#x1F95D","&#x1F345","&#x1F346","&#x1F951","&#x1F966","&#x1F96C","&#x1F952","&#x1F336","&#x1F33D","&#x1F955","&#x1F9C5","&#x1F9C4","&#x1F954","&#x1F360","&#x1F950","&#x1F96F","&#x1F35E","&#x1F956","&#x1F968","&#x1F9C0","&#x1F95A","&#x1F373","&#x1F95E","&#x1F9C7","&#x1F953","&#x1F969","&#x1F357","&#x1F356","&#x1F32D","&#x1F354","&#x1F35F","&#x1F355","&#x1F96A","&#x1F9C6","&#x1F959","&#x1F32E","&#x1F32F","&#x1F957","&#x1F958","&#x1F96B","&#x1F35D","&#x1F35C","&#x1F372","&#x1F35B","&#x1F363","&#x1F371","&#x1F95F","&#x1F364","&#x1F359","&#x1F35A","&#x1F358","&#x1F365","&#x1F960","&#x1F96E","&#x1F362","&#x1F361","&#x1F367","&#x1F368","&#x1F366","&#x1F967","&#x1F9C1","&#x1F370","&#x1F382","&#x1F36E","&#x1F36D","&#x1F36C","&#x1F36B","&#x1F37F","&#x1F369","&#x1F36A","&#x1F330","&#x1F95C","&#x1F36F","&#x1F9C8","&#x1F95B","&#x1F37C","&#x1F375","&#x1F9C9","&#x1F964","&#x1F9C3","&#x1F9CA","&#x1F376","&#x1F37A","&#x1F37B","&#x1F942","&#x1F377","&#x1F943","&#x1F378","&#x1F379","&#x1F37E","&#x1F944","&#x1F374","&#x1F37D","&#x1F963","&#x1F961","&#x1F962","&#x1F9C2","&#x1F600","&#x1F603","&#x1F604","&#x1F601","&#x1F606","&#x1F605","&#x1F602","&#x1F923","&#x263A","&#x1F60A","&#x1F607","&#x1F642","&#x1F643","&#x1F609","&#x1F60C","&#x1F60D","&#x1F970","&#x1F618","&#x1F617","&#x1F619","&#x1F61A","&#x1F60B","&#x1F61B","&#x1F61D","&#x1F61C","&#x1F92A","&#x1F928","&#x1F9D0","&#x1F913","&#x1F60E","&#x1F929","&#x1F973","&#x1F60F","&#x1F612","&#x1F61E","&#x1F614","&#x1F61F","&#x1F615","&#x1F641","&#x1F623","&#x1F616","&#x1F62B","&#x1F629","&#x1F97A","&#x1F622","&#x1F62D","&#x1F624","&#x1F620","&#x1F621","&#x1F92C","&#x1F92F","&#x1F633","&#x1F975","&#x1F976","&#x1F631","&#x1F628","&#x1F630","&#x1F625","&#x1F613","&#x1F917","&#x1F914","&#x1F92D","&#x1F971","&#x1F92B","&#x1F925","&#x1F636","&#x1F610","&#x1F611","&#x1F62C","&#x1F644","&#x1F62F","&#x1F626","&#x1F627","&#x1F62E","&#x1F632","&#x1F634","&#x1F924","&#x1F62A","&#x1F635","&#x1F910","&#x1F974","&#x1F922","&#x1F92E","&#x1F927","&#x1F637","&#x1F912","&#x1F915","&#x1F911","&#x1F920","&#x1F608","&#x1F47F","&#x1F479","&#x1F47A","&#x1F921","&#x1F4A9","&#x1F47B","&#x1F480","&#x1F47D","&#x1F47E","&#x1F916","&#x1F383","&#x1F63A","&#x1F638","&#x1F639","&#x1F63B","&#x1F63C","&#x1F63D","&#x1F640","&#x1F63F","&#x1F63E","&#x1F932","&#x1F450","&#x1F64C","&#x1F44F","&#x1F91D","&#x1F44D","&#x1F44E","&#x1F44A","&#x270A","&#x1F91B","&#x1F91C","&#x1F91E","&#x270C","&#x1F91F","&#x1F918","&#x1F44C","&#x1F90F","&#x1F448","&#x1F449","&#x1F446","&#x1F447","&#x261D","&#x270B","&#x1F91A","&#x1F590","&#x1F596","&#x1F44B","&#x1F919","&#x1F4AA","&#x1F9BE","&#x1F595","&#x270D","&#x1F64F","&#x1F9B6","&#x1F9B5","&#x1F9BF","&#x1F484","&#x1F48B","&#x1F444","&#x1F9B7","&#x1F9B4","&#x1F445","&#x1F442","&#x1F9BB","&#x1F443","&#x1F463","&#x1F440","&#x1F9E0","&#x1F5E3","&#x1F464","&#x1F465","&#x1F476","&#x1F467","&#x1F9D2","&#x1F466","&#x1F469","&#x1F9D1","&#x1F468","&#x1F471","&#x1F9D4","&#x1F475","&#x1F9D3","&#x1F474","&#x1F472","&#x1F473","&#x1F9D5","&#x1F46E","&#x1F477","&#x1F482","&#x1F575","&#x1F470","&#x1F935","&#x1F478","&#x1F934","&#x1F9B8","&#x1F9B9","&#x1F936","&#x1F385","&#x1F9D9","&#x1F9DD","&#x1F9DB","&#x1F9DF","&#x1F9DE","&#x1F9DC","&#x1F9DA","&#x1F47C","&#x1F930","&#x1F931","&#x1F647","&#x1F481","&#x1F645","&#x1F646","&#x1F64B","&#x1F9CF","&#x1F926","&#x1F937","&#x1F64E","&#x1F64D","&#x1F487","&#x1F486","&#x1F9D6","&#x1F485","&#x1F933","&#x1F483","&#x1F57A","&#x1F46F","&#x1F574","&#x1F6B6","&#x1F3C3","&#x1F9CD","&#x1F9CE","&#x1F46B","&#x1F46D","&#x1F46C","&#x1F491","&#x1F48F","&#x1F46A","&#x1F9F6","&#x1F9F5","&#x1F9E5","&#x1F97C","&#x1F9BA","&#x1F45A","&#x1F455","&#x1F456","&#x1FA73","&#x1F454","&#x1F457","&#x1F459","&#x1FA71","&#x1F458","&#x1F97B","&#x1F97F","&#x1F460","&#x1F461","&#x1F462","&#x1FA70","&#x1F45E","&#x1F45F","&#x1F97E","&#x1FA72","&#x1F9E6","&#x1F9E4","&#x1F9E3","&#x1F3A9","&#x1F9E2","&#x1F452","&#x1F393","&#x26D1","&#x1F451","&#x1F48D","&#x1F45D","&#x1F45B","&#x1F45C","&#x1F4BC","&#x1F392","&#x1F9F3","&#x1F453","&#x1F576","&#x1F97D","&#x1F93F","&#x1F302","&#x1F9B1","&#x1F9B0","&#x1F9B3","&#x1F9B2","&#x1F697","&#x1F695","&#x1F699","&#x1F68C","&#x1F68E","&#x1F3CE","&#x1F693","&#x1F691","&#x1F692","&#x1F690","&#x1F69A","&#x1F69B","&#x1F69C","&#x1F6FA","&#x1F6F5","&#x1F3CD","&#x1F6F4","&#x1F6B2","&#x1F9BC","&#x1F9BD","&#x1F6A8","&#x1F694","&#x1F68D","&#x1F698","&#x1F696","&#x1F6A1","&#x1F6A0","&#x1F69F","&#x1F683","&#x1F68B","&#x1F69E","&#x1F69D","&#x1F684","&#x1F685","&#x1F688","&#x1F682","&#x1F686","&#x1F687","&#x1F68A","&#x1F689","&#x1F6EB","&#x1F6EC","&#x1F6E9","&#x1F4BA","&#x1F6F0","&#x1F680","&#x1F6F8","&#x1F681","&#x1F6F6","&#x26F5","&#x1F6A4","&#x1F6E5","&#x1F6F3","&#x26F4","&#x1F6A2","&#x26FD","&#x1F6A7","&#x1F6A6","&#x1F6A5","&#x1F68F","&#x1F5FA","&#x1F5FF","&#x1F5FD","&#x1F5FC","&#x1F3F0","&#x1F3EF","&#x1F3DF","&#x1F3A1","&#x1F3A2","&#x1F3A0","&#x26F2","&#x26F1","&#x1F3D6","&#x1F3DD","&#x1F3DC","&#x1F30B","&#x26F0","&#x1F3D4","&#x1F5FB","&#x1F3D5","&#x26FA","&#x1F3E0","&#x1F3E1","&#x1F3D8","&#x1F3DA","&#x1F3D7","&#x1F3ED","&#x1F3E2","&#x1F3EC","&#x1F3E3","&#x1F3E4","&#x1F3E5","&#x1F3E6","&#x1F3E8","&#x1F3EA","&#x1F3EB","&#x1F3E9","&#x1F492","&#x1F3DB","&#x26EA","&#x1F54C","&#x1F6D5","&#x1F54D","&#x1F54B","&#x26E9","&#x1F6E4","&#x1F6E3","&#x1F5FE","&#x1F391","&#x1F3DE","&#x1F305","&#x1F304","&#x1F320","&#x1F387","&#x1F386","&#x1F307","&#x1F306","&#x1F3D9","&#x1F303","&#x1F30C","&#x1F309","&#x1F301","&#x1F1FF","&#x1F1FE","&#x1F1FD","&#x1F1FC","&#x1F1FB","&#x1F1FA","&#x1F1F9","&#x1F1F8","&#x1F1F7","&#x1F1F6","&#x1F1F5","&#x1F1F4","&#x1F1F3","&#x1F1F2","&#x1F1F1","&#x1F1F0","&#x1F1EF","&#x1F1EE","&#x1F1ED","&#x1F1EC","&#x1F1EB","&#x1F1EA","&#x1F1E9","&#x1F1E8","&#x1F1E7","&#x1F1E6","&#x1F3F3","&#x1F3F4","&#x1F3C1","&#x1F6A9","&#x1F38C","&#x1F3FB","&#x1F3FC","&#x1F3FD","&#x1F3FE","&#x1F3FF"]};function n(t){var n=[];return e.each(t.o.plugins.emoji.emojiList,(function(o,r){if(e.isArray(r)){var i=r[0],a=r[1],s='<img src="'+a+'" alt="'+i+'">',l="emoji-"+i.replace(/:/g,""),x={hasIcon:!1,text:s,fn:function(){return t.execCmd("insertImage",a,!1,!0),!0}};t.addBtnDef(l,x),n.push(l)}else{var c="emoji-"+r.replace(/:/g,""),d={text:r,fn:function(){var e=String.fromCodePoint(r.replace("&#","0"));return t.execCmd("insertText",e),!0}};t.addBtnDef(c,d),n.push(c)}})),n}e.extend(!0,e.trumbowyg,{langs:{en:{emoji:"Add an emoji"},da:{emoji:"Tilføj et humørikon"},de:{emoji:"Emoticon einfügen"},et:{emoji:"Lisa emotikon"},fr:{emoji:"Ajouter un emoji"},hu:{emoji:"Emoji beszúrás"},ja:{emoji:"絵文字の挿入"},ko:{emoji:"이모지 넣기"},ru:{emoji:"Вставить emoji"},tr:{emoji:"Emoji ekle"},zh_cn:{emoji:"添加表情"}},plugins:{emoji:{init:function(e){e.o.plugins.emoji=e.o.plugins.emoji||t;var o={dropdown:n(e)};e.addBtnDef("emoji",o)}}}})}(jQuery)},125:function(){!function(e){"use strict";e.extend(!0,e.trumbowyg,{langs:{en:{history:{redo:"Redo",undo:"Undo"}},da:{history:{redo:"Annuller fortryd",undo:"Fortryd"}},de:{history:{redo:"Wiederholen",undo:"Rückgängig"}},et:{history:{redo:"Võta tagasi",undo:"Tee uuesti"}},fr:{history:{redo:"Annuler",undo:"Rétablir"}},hu:{history:{redo:"Visszállít",undo:"Visszavon"}},ko:{history:{redo:"다시 실행",undo:"되돌리기"}},pt_br:{history:{redo:"Refazer",undo:"Desfazer"}},zh_tw:{history:{redo:"重做",undo:"復原"}}},plugins:{history:{init:function(t){t.o.plugins.history=e.extend(!0,{_stack:[],_index:-1,_focusEl:void 0},t.o.plugins.history||{});var n={title:t.lang.history.redo,ico:"redo",key:"Y",fn:function(){if(t.o.plugins.history._index<t.o.plugins.history._stack.length-1){t.o.plugins.history._index+=1;var e=t.o.plugins.history._index,n=t.o.plugins.history._stack[e];t.execCmd("html",n),t.o.plugins.history._stack[e]=t.$ed.html(),a(),r()}}},o={title:t.lang.history.undo,ico:"undo",key:"Z",fn:function(){if(t.o.plugins.history._index>0){t.o.plugins.history._index-=1;var e=t.o.plugins.history._index,n=t.o.plugins.history._stack[e];t.execCmd("html",n),t.o.plugins.history._stack[e]=t.$ed.html(),a(),r()}}},r=function(){var e=t.o.plugins.history._index,n=t.o.plugins.history._stack.length,o=0!==n&&e!==n-1;i("historyUndo",e>0),i("historyRedo",o)},i=function(e,n){var o=t.$box.find(".trumbowyg-"+e+"-button");n?o.removeClass("trumbowyg-disable"):o.hasClass("trumbowyg-disable")||o.addClass("trumbowyg-disable")},a=function(){var e=t.doc.getSelection().focusNode,n=t.doc.createRange();e.childNodes.length>0&&(n.setStartAfter(e.childNodes[e.childNodes.length-1]),n.setEndAfter(e.childNodes[e.childNodes.length-1]),t.doc.getSelection().removeAllRanges(),t.doc.getSelection().addRange(n))};t.$c.on("tbwinit tbwchange",(function(){var n,o,i=t.o.plugins.history._index,a=t.o.plugins.history._stack,s=a.slice(-1)[0]||"<p></p>",l=a[i],x=t.$ed.html(),c=t.doc.getSelection().focusNode,d="",u=t.o.plugins.history._focusEl;n=e("<div>"+s+"</div>").find("*").map((function(){return this.localName})),o=e("<div>"+x+"</div>").find("*").map((function(){return this.localName})),c&&(t.o.plugins.history._focusEl=c,d=c.outerHTML||c.textContent),x!==l&&(d.slice(-1).match(/\s/)||!function(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n+=1)if(e[n]!==t[n])return!1;return!0}(n,o)||t.o.plugins.history._index<=0||c!==u?(t.o.plugins.history._index+=1,t.o.plugins.history._stack=a.slice(0,t.o.plugins.history._index),t.o.plugins.history._stack.push(x)):t.o.plugins.history._stack[i]=x,r())})),t.addBtnDef("historyRedo",n),t.addBtnDef("historyUndo",o)}}}})}(jQuery)}},t={};function n(o){var r=t[o];if(void 0!==r)return r.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,n),i.exports}!function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?o(Object(r),!0).forEach((function(n){e(t,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var i=encodeURIComponent,a=function(e){return function(e){return Object.keys(e).map((function(n){var o=e[n];return t(o)===t([])?o.map((function(e){return"".concat(n,"[]=").concat(e)})).join("&"):n+"="+e[n]})).join("&")}(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.unix_timestamp_after,o=void 0===n?null:n,r=e.unix_timestamp_before,a=void 0===r?null:r,s=e.tags,l=void 0===s?null:s,x=e.number_of_particles,c=void 0===x?null:x,d=e.order_direction,u=void 0===d?null:d,F=e.output,f=void 0===F?"json":F,p={};if(null!==o&&(p.unix_timestamp_after=parseInt(o)),null!==a&&(p.unix_timestamp_before=parseInt(a)),null!==c&&(p.number_of_particles=parseInt(c)),null!==u&&(p.order_direction=u),null!==l){if(t(l)!==t([]))throw new Error("Tags need to be an array of strings");p.tags=l.map(i)}return"html"!==f&&(f="json"),p.output=f,p}(e))},s=function(e){var n=e.routes,o=e.wp_rest_nonce,i=function(e){var t=e.routes,n=e.last_request_timestamp,o=function(e){return e.json().then((function(e){return e.particles}))},i=function(e){return e.json().then((function(e){return n=e.request_timestamp,e.particles}))};return{fetchParticles:function(e){return fetch(t.getParticles+"?"+a(e),{method:"GET"}).then(o).catch(console.error)},fetchParticlesUpdate:function(e){var o=r({unix_timestamp_after:n,order_direction:"DESC"},e);return fetch(t.getParticles+"?"+a(o)).then(i).catch(console.error)},resetLastRequestTimestamp:function(){n=0}}}(e),s=function(e,t,n){return fetch(e,{method:n,headers:{"Content-Type":"application/json","X-WP-Nonce":o},credentials:"include",body:JSON.stringify(t)}).then((function(e){return e.json()})).then(l).catch(console.error)},l=function(e){return o=e.wp_rest_nonce,e},x={};return r(r({},i),{},{updateParticle:function(e){return(t=n.updateParticle,o=e,s(t,o,"POST")).then((function(e){return e.particle}));var t,o},deleteParticle:function(e){return t=n.deleteParticle,s(t,{particle_id:e},"DELETE");var t},fetchAttachment:function(e){return t(x[e])===t({})?new Promise((function(t){t(x[e])})):fetch("/wp-json/wp/v2/media/".concat(e)).then((function(e){return e.json()})).then((function(e){return x[e.id]=e,e})).catch((function(){x[e]={error:!0}}))},uploadAttachment:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(r,i){var a=new FormData(e);t&&t(),$.ajax({url:n.upload,method:"POST",cache:!1,contentType:!1,processData:!1,headers:{"X-WP-Nonce":o},data:a,success:function(e){r(l(e))}})}))}})},l=function(){var e=[];return{add:function(t,n){return e.find((function(e){return e.slug===t}))?(console.error("content type already exists ".concat(t)),!1):(e.push({type:t,cls:n}),!0)},get:function(t){var n=e.find((function(e){return e.type===t}));return n?new n.cls($):(console.log("cannot find content view of type ".concat(t)),!1)}}},x=function(e,t,n,o){e.id;var r=e.created_timestamp,i=e.author,a=e.author_id,s=e.tags,l=new Date(1e3*parseInt(r)),x=$('<div class="live-news-particle__header">\n\n        <div class="live-news-particle__meta">\n                <span class="live-news-particle__date">'.concat(l.toLocaleDateString()," ").concat(l.toLocaleTimeString(),'</span>\n                <span class="live-news-particle__tags">').concat(s.join(", "),'</span>\n        </div>\n\n        <div class="live-news-particle__author">\n            <div class="live-news-particle__name">').concat(i||a,"</div>\n        </div>\n\n    </div>")),c=$("<div/>").addClass("live-news-particle__content");c.append(e.contentViews.map((function(e){return e.preview$()})));var d=$('<nav class="live-news-particle__options">\n            <ul>\n                <li>\n                    <a data-action="edit" href="#">Bearbeiten</a>\n                </li>\n                <li>\n                    <a data-action="delete" href="#">Löschen</a>\n                </li>\n            </ul>\n       </nav>');d.on("click","[data-action=delete]",(function(t){t.preventDefault(),g(!0),o(e)})),d.on("click","[data-action=edit]",(function(o){o.preventDefault();var r=F.hasClass("is-editing");r?n(e):(u(),t(e)),h(!r)}));var u=function(){for(var t in e.contentViews)e.contentViews.hasOwnProperty(t)&&e.contentViews[t].setValue(e.contents[t].content)};u();var F=$("<div></div>").addClass("live-news-particle");F.append(x),F.append(c),F.append(d);var f=$("<div></div>").addClass("live-news-particle__loading").appendTo(F),p=$("<span></span>").addClass("spinner").appendTo(f),g=function(e){e?(F.addClass("is-loading"),p.addClass("is-active")):(F.removeClass("is-loading"),p.removeClass("is-active"))},h=function(e){e?(F.addClass("is-editing"),d.find("[data-action=edit]").text("Abbrechen")):(F.removeClass("is-editing"),d.find("[data-action=edit]").text("Bearbeiten"))};return{get$:function(){return F},particle:e,setLoading:g,setEditing:h}};function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function u(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?F(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var f={},p=function(e,n){return"undefined"===t(f[e])&&(f[e]=[]),f[e].push(n),function(){f[e]=f[e].filter((function(e){return e!==n}))}},g=function(e,n){t(f[e])===t([])&&f[e].forEach((function(e){e(n)}))},h={listen:p,trigger:g,onAddParticle:function(e){return p("particleAdd",e)},triggerAddParticle:function(e){return g("particleAdd",e)},onUpdateParticle:function(e){return p("particleUpdate",e)},triggerUpdateParticle:function(e){return g("particleUpdate",e)},onRemoveParticle:function(e){return p("particleRemove",e)},triggerRemoveParticle:function(e){return g("particleRemove",e)}},v=function(e,n,o){var r=!1,i=!1,a={},s=l();a.$root=o("#".concat(e.dom.rootId)),a.$root.empty();var d=function(e,o,i,a,s,l){var x=null,c=null,p=[],h=e("<div></div>").addClass("live-news-editor"),v=e("<div></div>").addClass("live-news-input");h.append(v);var m=e("<div></div>").addClass("live-news__items");v.append(m);var b=e("<div><h4>Eigenschaften wählen</h4></div>").addClass("live-news-input__tags").appendTo(v),y=e("<div></div>").addClass("live-news-input__tags--list").appendTo(b),C=function(t){return e("<label><input type='checkbox' value=\"".concat(t,'" />  ').concat(t,"</label>")).addClass("live-news-input__tags--tag")};!function(e){y.empty().append(e.map(C))}(o);var w=e("<button>Nachricht speichern</button>").attr("type","submit").addClass("live-news-input__submit").on("click",(function(e){e.preventDefault(),function(){if(!r){r=!0,d.setIsSaving(!0);var e=d.getContents(),t={particle_contents:e.map((function(e){return e.content})),particle_content_types:e.map((function(e){return e.type})),tags:d.getTags()};d.getId()&&(t.particle_id=d.getId()),d.getAuthorId()&&(t.author_id=d.getAuthorId()),n.updateParticle(t).then((function(){t.particle_id>0?(F.setEditing(t.particle_id,!1),F.setLoading(t.particle_id,!0)):f(!0),d.setIsSaving(!1),d.reset(),r=!1,g()}))}}()})).appendTo(v),A=e("<button>Zurücksetzten</button>").attr("type","submit").addClass("live-news-input__reset").on("click",(function(e){e.preventDefault(),T()})).appendTo(v),$=e("<button>Abbrechen</button>").attr("type","submit").addClass("live-news-input__cancel").on("click",(function(e){e.preventDefault(),F.setEditing(d.getId(),!1),d.reset()})).hide().appendTo(v),E=e("<span class='spinner'></span>").insertAfter(w),B=function(e){if(t(e)===t("")){var n=i.get(e);if(!n)return;m.append(n.editor$()),p.push(n)}else m.append(e.editor$()),p.push(e)},D=function(e){P();var t,n=u(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;B(o)}}catch(e){n.e(e)}finally{n.f()}},k=function(){return b.find("[type=checkbox]")},_=function(t){k().map((function(n,o){t.includes(o.value)?e(o).prop("checked",!0):e(o).prop("checked",!1)}))},T=function(){x=null,c=null;var e,t=u(p);try{for(t.s();!(e=t.n()).done;)e.value.setValue("")}catch(e){t.e(e)}finally{t.f()}b.find("input").prop("checked",!1),$.hide(),A.show()},P=function(){m.empty(),p=[]};return{get$:function(){return h},addContent:B,setParticle:function(e){var t=e.id,n=e.author_id,o=e.tags,r=e.contentViews;x=t,c=n,_(o),D(r),$.show(),A.hide()},getId:function(){return x},getAuthorId:function(){return c},getContents:function(){return p.map((function(e){return{type:e.slug,content:e.getValue()}}))},setContents:D,getTags:function(){return k().map((function(t,n){return!!e(n).prop("checked")&&n.value})).toArray().filter((function(e){return!1!==e}))},setTags:_,reset:T,clearContentViews:P,setIsSaving:function(e){e?(v.addClass("is-saving"),w.attr("disabled","disabled"),A.attr("disabled","disabled"),$.attr("disabled","disabled"),E.addClass("is-active"),k().attr("disabled","disabled")):(v.removeClass("is-saving"),E.removeClass("is-active"),w.removeAttr("disabled"),A.removeAttr("disabled"),$.removeAttr("disabled"),k().removeAttr("disabled"));var t,n=u(p);try{for(n.s();!(t=n.n()).done;)t.value.setDisabled(e)}catch(e){n.e(e)}finally{n.f()}}}}(o,e.tags,s);a.$root.append(d.get$()),a.$preview=o("<div></div>").addClass("live-news__preview").appendTo(a.$root),a.$previewHeader=o("<div></div>").addClass("live-news__preview--header").appendTo(a.$preview),a.$previewLoadingIndicator=o("<span class='spinner'></span>").appendTo(a.$previewHeader);var F=function(e,t,n,o,r){var i=[],a=e("<div></div>").addClass("live-news__stream"),s=function(e){return i.findIndex((function(t){return t.particle.id===e}))},l=function(e){return i.find((function(t){return t.particle.id===e}))},d=function(e){return e.contentViews=e.contents.map((function(e){var n=e.type,o=e.content,r=t.get(n);return r?(r.setValue(o),r):null})).filter((function(e){return null!==e})),x(e,n,o,r)},u=function(e){var t=l(e);t&&(i=i.filter((function(t){return t.particle.id!==e})),t.get$().slideUp(330,(function(){t.get$().remove()})))};return{get$:function(){return a},setEditing:function(e,t){var n=l(e);!function(){var e,t=c(i);try{for(t.s();!(e=t.n()).done;)e.value.setEditing(!1)}catch(e){t.e(e)}finally{t.f()}}(),n&&n.setEditing(t)},setLoading:function(e,t){var n=l(e);n&&n.setLoading(t)},removeParticleById:u,update:function(e){var t,n=c(e.reverse());try{for(n.s();!(t=n.n()).done;){var o=t.value,r=s(o.id);if(!0!==o.is_deleted)if(r>=0){var x=l(o.id),F=r,f=d(o);x.get$().after(f.get$()),x.get$().remove(),i[F]=f}else{var p=d(o);i.push(p),a.prepend(p.get$())}else r&&u(o.id)}}catch(e){n.e(e)}finally{n.f()}}}}(o,s,(function(e){F.setEditing(e.id,!0),d.setParticle(e)}),(function(e){d.reset()}),(function(e){n.deleteParticle(e.id).then((function(t){t.deleted&&F.removeParticleById(e.id)}))}));a.$preview.append(F.get$());var f=function(e){e?a.$previewLoadingIndicator.addClass("is-active"):a.$previewLoadingIndicator.removeClass("is-active")},p=null,g=function e(){i||(clearTimeout(p),i=!0,n.fetchParticlesUpdate().then((function(t){p=setTimeout(e,5e3),i=!1,f(!1),F.update(t)})))};return f(!0),g(),{dom:a,contentTypeProvider:s,editor:d,events:h,init:function(){d.setContents(["title","html","upload"])}}};function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function C(e,t){return C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},C(e,t)}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}function A(e,n){if(n&&("object"===t(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}n(753),n(286),n(125),n(932),n(449),n(414);var B=function(){function e(){m(this,e),this.$editor=$("<div></div>").addClass("particle-content-type live-news-editor__item"),this.$preview=$("<div></div>").addClass("particle-content-type--preview")}return y(e,[{key:"editor$",value:function(){return this.$editor.empty()?(this.$toolbar=$('\n                <div class="live-news-editor__toolbar">\n                    <div class="live-news-editor__mover">\n                        <button class="live-news-editor__up">\n\n                            '.concat('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"\n                                 role="img" aria-hidden="true" focusable="false">\n                                <polygon points="9,4.5 3.3,10.1 4.8,11.5 9,7.3 13.2,11.5 14.7,10.1 "></polygon>\n                            </svg>','\n                        </button>\n                        <span class="live-news-editor__handle">\n                            ').concat('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18" role="img"\n                             aria-hidden="true" focusable="false"><path\n                                    d="M13,8c0.6,0,1-0.4,1-1s-0.4-1-1-1s-1,0.4-1,1S12.4,8,13,8z M5,6C4.4,6,4,6.4,4,7s0.4,1,1,1s1-0.4,1-1S5.6,6,5,6z M5,10 c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S5.6,10,5,10z M13,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S13.6,10,13,10z M9,6 C8.4,6,8,6.4,8,7s0.4,1,1,1s1-0.4,1-1S9.6,6,9,6z M9,10c-0.6,0-1,0.4-1,1s0.4,1,1,1s1-0.4,1-1S9.6,10,9,10z"></path></svg>','\n                        </span>\n                        <button class="live-news-editor__down">\n                            ').concat('<svg width="18" height="18" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 18"\n                                 role="img" aria-hidden="true" focusable="false">\n                                <polygon points="9,13.5 14.7,7.9 13.2,6.5 9,10.7 4.8,6.5 3.3,7.9 "></polygon>\n                            </svg>',"\n                        </button>\n                    </div>\n\n                </div>")),this.$editor.append(this.$toolbar),this.$editor):this.$editor}},{key:"preview$",value:function(){return $("<p/>").text(this.getValue())}},{key:"setValue",value:function(e){}},{key:"getValue",value:function(){}},{key:"setDisabled",value:function(e){}}]),e}();B.prototype.slug="";var D=function(e){w(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=E(t);if(n){var r=E(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return A(this,e)});function r(e){var t;return m(this,r),(t=o.call(this,e))._tmp_val="",t}return y(r,[{key:"editor$",value:function(){return this.$editor.empty()?(this.$textarea=$("<textarea/>").addClass("live-news-input__textarea"),this.$editor.append(this.$textarea),this.$textarea.trumbowyg(LiveNews.contentTypes.html),this._tmp_val&&this.setValue(this._tmp_val),this.$editor):this.$editor}},{key:"preview$",value:function(){return $("<div></div>").html(this.getValue())}},{key:"getValue",value:function(){return this.$textarea?this.$textarea.trumbowyg("html"):this._tmp_val}},{key:"setValue",value:function(e){this.$textarea?this.$textarea.trumbowyg("html",e):this._tmp_val=e}},{key:"setDisabled",value:function(e){e?this.$textarea.trumbowyg("disable"):this.$textarea.trumbowyg("enable")}}]),r}(B);D.prototype.slug="html";var k=function(e){w(r,e);var t,n,o=(t=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,o=E(t);if(n){var r=E(this).constructor;e=Reflect.construct(o,arguments,r)}else e=o.apply(this,arguments);return A(this,e)});function r(e){var t;return m(this,r),(t=o.call(this,e))._tmp_val="",t}return y(r,[{key:"editor$",value:function(){if(!this.$editor.empty())return this.$editor;var e=this.getValue();return this.$content=$("<input />").addClass("live-news-input__input-text").attr("type","text").attr("placeholder","Titel (optional)").val(e),this.$editor.append(this.$content),this.$editor}},{key:"preview$",value:function(){return $("<h3/>").text(this.getValue())}},{key:"setValue",value:function(e){this.$content?this.$content.val(e):this._tmp_val=e}},{key:"getValue",value:function(){return this.$content?this.$content.val():this._tmp_val}},{key:"setDisabled",value:function(e){e?this.$content.attr("disabled","disabled"):this.$content.removeAttr("disabled")}}]),r}(B);k.prototype.slug="title";var _=function(e){w(i,e);var n,o,r=(n=i,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=E(n);if(o){var r=E(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return A(this,e)});function i(e){var t;return m(this,i),(t=r.call(this,e)).val="",t.fetched_id=null,t}return y(i,[{key:"editor$",value:function(){var e=this;if(!this.$editor.empty())return this.$editor;var t=$("<lable><strong>Bild (optional)</strong><br></lable>"),n=$("<input />").addClass("live-news-input__input-file").attr("name","file").attr("type","file").attr("placeholder","Bild (optional)").attr("accept","image/x-png,image/gif,image/jpeg").appendTo(t);this.$input=n;var o=$("<form></form>");o.append(t),o.on("submit",(function(t){t.preventDefault(),""!==n.val()&&(e.setFetchingImages(!0),LiveNews.api.uploadAttachment(o[0],(function(){e.setUploadingImage(!0)})).then((function(t){e.setUploadingImage(!1),e.setValue(t.attachment_id)})))})),n.on("change",(function(){return o.submit()})),this.$editor.append(o);var r=$("<div></div>");return this.getEditorImg$().appendTo(r.appendTo(o)),this.$delete=$("<button>Bild entfernen</button>"),this.$delete.on("click",(function(t){t.preventDefault(),e.setValue("")})),r.append(this.$delete),this.updateDeleteButton(),this.$editor}},{key:"setFetchingImages",value:function(e){this.setFetchingImage(this.getEditorImg$(),e),this.setFetchingImage(this.getImg$(),e)}},{key:"setFetchingImage",value:function(e,t){e&&(t?e.find(".spinner").addClass("is-active"):e.find(".spinner").removeClass("is-active"))}},{key:"setUploadingImage",value:function(e){this.setDisabled(e)}},{key:"renderImages",value:function(e){this.renderImage(this.$img,e),this.renderImage(this.$editorImg,e)}},{key:"renderImage",value:function(e,n){e&&(null!==n&&t(n)===t({})?n.media_details?(e.show(),e.find("img").attr("src",n.media_details.sizes.medium.source_url)):e.replaceWith("<p>🖼 Image lost!</p>"):e.hide())}},{key:"getEditorImg$",value:function(){return this.$editorImg||(this.$editorImg=$("<div class='particle__content-type--upload'><span class='spinner'></span><img class='particle__img'/></div>")),this.fetchAttachment(),this.$editorImg}},{key:"getImg$",value:function(){return this.$img||(this.$img=$("<div class='particle__content-type--upload'><span class='spinner'></span><img class='particle__img'/></div>")),this.fetchAttachment(),this.$img}},{key:"preview$",value:function(){return this.getImg$()}},{key:"fetchAttachment",value:function(){var e=this;""!==this.val&&!0!==this.isFetching&&this.fetched_id!==this.val&&(this.isFetching=!0,this.setFetchingImages(!0),LiveNews.api.fetchAttachment(this.val).then((function(t){e.isFetching=!1,e.fetched_id=e.val,e.setFetchingImages(!1),e.renderImages(t)})))}},{key:"setValue",value:function(e){this.val=e,this.$input&&this.$input.val(""),""===e&&this.renderImage(this.$editorImg,null),this.updateDeleteButton(),this.fetchAttachment()}},{key:"getValue",value:function(){return this.val}},{key:"updateDeleteButton",value:function(){this.showDeleteImage(""!==this.getValue())}},{key:"showDeleteImage",value:function(e){this.$delete&&(e?this.$delete.show():e||this.$delete.hide())}},{key:"setDisabled",value:function(e){e?this.$input.attr("disabled","disabled"):this.$input.removeAttr("disabled")}}]),i}(B);_.prototype.slug="upload",function(e){window.LiveNews=e;var t=s(e);window.LiveNews.api=t,window.$=jQuery;var n=v(e,t,jQuery);window.LiveNews.app=n,n.contentTypeProvider.add(k.prototype.slug,k),n.contentTypeProvider.add(D.prototype.slug,D),n.contentTypeProvider.add(_.prototype.slug,_),n.init()}(LiveNews)}()}();